!function(t,e,i){var n=t.L,o={};o.version=0.6.4,object==typeof module&&object==typeof module.exportsmodule.exports=ofunction==typeof define&&define.amd&&define(o),o.noConflict=function(){return t.L=n,this},t.L=o,o.Util={extendfunction(t){var e,i,n,o,s=Array.prototype.slice.call(arguments,1);for(i=0,n=s.length;ni;i++){o=s[i]{};for(e in o)o.hasOwnProperty(e)&&(t[e]=o[e])}return t},bindfunction(t,e){var i=arguments.length2Array.prototype.slice.call(arguments,2)null;return function(){return t.apply(e,iarguments)}},stampfunction(){var t=0,e=_leaflet_id;return function(i){return i[e]=i[e]++t,i[e]}}(),invokeEachfunction(t,e,i){var n,o;if(object==typeof t){o=Array.prototype.slice.call(arguments,3);for(n in t)e.apply(i,[n,t[n]].concat(o));return!0}return!1},limitExecByIntervalfunction(t,e,i){var n,o;return function s(){var a=arguments;return n(o=!0,void 0)(n=!0,setTimeout(function(){n=!1,o&&(s.apply(i,a),o=!1)},e),t.apply(i,a),void 0)}},falseFnfunction(){return!1},formatNumfunction(t,e){var i=Math.pow(10,e5);return Math.round(ti)i},trimfunction(t){return t.trimt.trim()t.replace(^s+s+$g,)},splitWordsfunction(t){return o.Util.trim(t).split(s+)},setOptionsfunction(t,e){return t.options=o.extend({},t.options,e),t.options},getParamStringfunction(t,e,i){var n=[];for(var o in t)n.push(encodeURIComponent(io.toUpperCase()o)+=+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf()&)+n.join(&)},templatefunction(t,e){return t.replace({ ([w_]+) }g,function(t,n){var o=e[n];if(o===i)throw new Error(No value provided for variable +t);returnfunction==typeof o&&(o=o(e)),o})},isArrayfunction(t){return[object Array]===Object.prototype.toString.call(t)},emptyImageUrldataimagegif;base64,R0lGODlhAQABAADACwAAAAAAQABAAACADs=},function(){function e(e){var i,n,o=[webkit,moz,o,ms];for(i=0;io.length&&!n;i++)n=t[o[i]+e];return n}function i(e){var i=+new Date,o=Math.max(0,16-(i-n));return n=i+o,t.setTimeout(e,o)}var n=0,s=t.requestAnimationFramee(RequestAnimationFrame)i,a=t.cancelAnimationFramee(CancelAnimationFrame)e(CancelRequestAnimationFrame)function(e){t.clearTimeout(e)};o.Util.requestAnimFrame=function(e,n,a,r){return e=o.bind(e,n),a&&s===i(e(),void 0)s.call(t,e,r)},o.Util.cancelAnimFrame=function(e){e&&a.call(t,e)}}(),o.extend=o.Util.extend,o.bind=o.Util.bind,o.stamp=o.Util.stamp,o.setOptions=o.Util.setOptions,o.Class=function(){},o.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},i=function(){};i.prototype=this.prototype;var n=new i;n.constructor=e,e.prototype=n;for(var s in this)this.hasOwnProperty(s)&&prototype!==s&&(e[s]=this[s]);t.statics&&(o.extend(e,t.statics),delete t.statics),t.includes&&(o.Util.extend.apply(null,[n].concat(t.includes)),delete t.includes),t.options&&n.options&&(t.options=o.extend({},n.options,t.options)),o.extend(n,t),n._initHooks=[];var a=this;return e.__super__=a.prototype,n.callInitHooks=function(){if(!this._initHooksCalled){a.prototype.callInitHooks&&a.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=n._initHooks.length;et;t++)n._initHooks[t].call(this)}},e},o.Class.include=function(t){o.extend(this.prototype,t)},o.Class.mergeOptions=function(t){o.extend(this.prototype.options,t)},o.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i=function==typeof ttfunction(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks[],this.prototype._initHooks.push(i)};var s=_leaflet_events;o.Mixin={},o.Mixin.Events={addEventListenerfunction(t,e,i){if(o.Util.invokeEach(t,this.addEventListener,this,e,i))return this;var n,a,r,h,l,u,c,d=this[s]=this[s]{},p=i&&o.stamp(i);for(t=o.Util.splitWords(t),n=0,a=t.length;an;n++)r={actione,contextithis},h=t[n],i(l=h+_idx,u=l+_len,c=d[l]=d[l]{},c[p](c[p]=[],d[u]=(d[u]0)+1),c[p].push(r))(d[h]=d[h][],d[h].push(r));return this},hasEventListenersfunction(t){var e=this[s];return!!e&&(t in e&&e[t].length0t+_idxin e&&e[t+_idx_len]0)},removeEventListenerfunction(t,e,i){if(!this[s])return this;if(!t)return this.clearAllEventListeners();if(o.Util.invokeEach(t,this.removeEventListener,this,e,i))return this;var n,a,r,h,l,u,c,d,p,_=this[s],m=i&&o.stamp(i);for(t=o.Util.splitWords(t),n=0,a=t.length;an;n++)if(r=t[n],u=r+_idx,c=u+_len,d=_[u],e){if(h=i&&dd[m]_[r]){for(l=h.length-1;l=0;l--)h[l].action!==ei&&h[l].context!==i(p=h.splice(l,1),p[0].action=o.Util.falseFn);i&&d&&0===h.length&&(delete d[m],_[c]--)}}else delete _[r],delete _[u];return this},clearAllEventListenersfunction(){return delete this[s],this},fireEventfunction(t,e){if(!this.hasEventListeners(t))return this;var i,n,a,r,h,l=o.Util.extend({},e,{typet,targetthis}),u=this[s];if(u[t])for(i=u[t].slice(),n=0,a=i.length;an;n++)i[n].action.call(i[n].contextthis,l);r=u[t+_idx];for(h in r)if(i=r[h].slice())for(n=0,a=i.length;an;n++)i[n].action.call(i[n].contextthis,l);return this},addOneTimeEventListenerfunction(t,e,i){if(o.Util.invokeEach(t,this.addOneTimeEventListener,this,e,i))return this;var n=o.bind(function(){this.removeEventListener(t,e,i).removeEventListener(t,n,i)},this);return this.addEventListener(t,e,i).addEventListener(t,n,i)}},o.Mixin.Events.on=o.Mixin.Events.addEventListener,o.Mixin.Events.off=o.Mixin.Events.removeEventListener,o.Mixin.Events.once=o.Mixin.Events.addOneTimeEventListener,o.Mixin.Events.fire=o.Mixin.Events.fireEvent,function(){var n=!!t.ActiveXObject,s=n&&!t.XMLHttpRequest,a=n&&!e.querySelector,r=n&&!e.addEventListener,h=navigator.userAgent.toLowerCase(),l=-1!==h.indexOf(webkit),u=-1!==h.indexOf(chrome),c=-1!==h.indexOf(phantom),d=-1!==h.indexOf(android),p=-1!==h.search(android [23]),_=typeof orientation!=i+,m=t.navigator&&t.navigator.msPointerEnabled&&t.navigator.msMaxTouchPoints,f=devicePixelRatioin t&&t.devicePixelRatio1matchMediain t&&t.matchMedia((min-resolution144dpi))&&t.matchMedia((min-resolution144dpi)).matches,g=e.documentElement,v=n&&transitionin g.style,y=WebKitCSSMatrixin t&&m11in new t.WebKitCSSMatrix,L=MozPerspectivein g.style,P=OTransitionin g.style,x=!t.L_DISABLE_3D&&(vyLP)&&!c,w=!t.L_NO_TOUCH&&!c&&function(){var t=ontouchstart;if(mt in g)return!0;var i=e.createElement(div),n=!1;return i.setAttribute(i.setAttribute(t,return;),function==typeof i[t]&&(n=!0),i.removeAttribute(t),i=null,n)!1}();o.Browser={ien,ie6s,ie7a,ielt9r,webkitl,androidd,android23p,chromeu,ie3dv,webkit3dy,gecko3dL,opera3dP,any3dx,mobile_,mobileWebkit_&&l,mobileWebkit3d_&&y,mobileOpera_&&t.opera,touchw,msTouchm,retinaf}}(),o.Point=function(t,e,i){this.x=iMath.round(t)t,this.y=iMath.round(e)e},o.Point.prototype={clonefunction(){return new o.Point(this.x,this.y)},addfunction(t){return this.clone()._add(o.point(t))},_addfunction(t){return this.x+=t.x,this.y+=t.y,this},subtractfunction(t){return this.clone()._subtract(o.point(t))},_subtractfunction(t){return this.x-=t.x,this.y-=t.y,this},divideByfunction(t){return this.clone()._divideBy(t)},_divideByfunction(t){return this.x=t,this.y=t,this},multiplyByfunction(t){return this.clone()._multiplyBy(t)},_multiplyByfunction(t){return this.x=t,this.y=t,this},roundfunction(){return this.clone()._round()},_roundfunction(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floorfunction(){return this.clone()._floor()},_floorfunction(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTofunction(t){t=o.point(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(ee+ii)},equalsfunction(t){return t=o.point(t),t.x===this.x&&t.y===this.y},containsfunction(t){return t=o.point(t),Math.abs(t.x)=Math.abs(this.x)&&Math.abs(t.y)=Math.abs(this.y)},toStringfunction(){returnPoint(+o.Util.formatNum(this.x)+, +o.Util.formatNum(this.y)+)}},o.point=function(t,e,n){return t instanceof o.Pointto.Util.isArray(t)new o.Point(t[0],t[1])t===inull===ttnew o.Point(t,e,n)},o.Bounds=function(t,e){if(t)for(var i=e[t,e]t,n=0,o=i.length;on;n++)this.extend(i[n])},o.Bounds.prototype={extendfunction(t){return t=o.point(t),this.minthis.max(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y))(this.min=t.clone(),this.max=t.clone()),this},getCenterfunction(t){return new o.Point((this.min.x+this.max.x)2,(this.min.y+this.max.y)2,t)},getBottomLeftfunction(){return new o.Point(this.min.x,this.max.y)},getTopRightfunction(){return new o.Point(this.max.x,this.min.y)},getSizefunction(){return this.max.subtract(this.min)},containsfunction(t){var e,i;return t=number==typeof t[0]t instanceof o.Pointo.point(t)o.bounds(t),t instanceof o.Bounds(e=t.min,i=t.max)e=i=t,e.x=this.min.x&&i.x=this.max.x&&e.y=this.min.y&&i.y=this.max.y},intersectsfunction(t){t=o.bounds(t);var e=this.min,i=this.max,n=t.min,s=t.max,a=s.x=e.x&&n.x=i.x,r=s.y=e.y&&n.y=i.y;return a&&r},isValidfunction(){return!(!this.min!this.max)}},o.bounds=function(t,e){return!tt instanceof o.Boundstnew o.Bounds(t,e)},o.Transformation=function(t,e,i,n){this._a=t,this._b=e,this._c=i,this._d=n},o.Transformation.prototype={transformfunction(t,e){return this._transform(t.clone(),e)},_transformfunction(t,e){return e=e1,t.x=e(this._at.x+this._b),t.y=e(this._ct.y+this._d),t},untransformfunction(t,e){return e=e1,new o.Point((t.xe-this._b)this._a,(t.ye-this._d)this._c)}},o.DomUtil={getfunction(t){returnstring==typeof te.getElementById(t)t},getStylefunction(t,i){var n=t.style[i];if(!n&&t.currentStyle&&(n=t.currentStyle[i]),(!nauto===n)&&e.defaultView){var o=e.defaultView.getComputedStyle(t,null);n=oo[i]null}returnauto===nnulln},getViewportOffsetfunction(t){var i,n=0,s=0,a=t,r=e.body,h=e.documentElement,l=o.Browser.ie7;do{if(n+=a.offsetTop0,s+=a.offsetLeft0,n+=parseInt(o.DomUtil.getStyle(a,borderTopWidth),10)0,s+=parseInt(o.DomUtil.getStyle(a,borderLeftWidth),10)0,i=o.DomUtil.getStyle(a,position),a.offsetParent===r&&absolute===i)break;if(fixed===i){n+=r.scrollToph.scrollTop0,s+=r.scrollLefth.scrollLeft0;break}if(relative===i&&!a.offsetLeft){var u=o.DomUtil.getStyle(a,width),c=o.DomUtil.getStyle(a,max-width),d=a.getBoundingClientRect();(none!==unone!==c)&&(s+=d.left+a.clientLeft),n+=d.top+(r.scrollToph.scrollTop0);break}a=a.offsetParent}while(a);a=t;do{if(a===r)break;n-=a.scrollTop0,s-=a.scrollLeft0,o.DomUtil.documentIsLtr()!o.Browser.webkit&&!l(s+=a.scrollWidth-a.clientWidth,l&&hidden!==o.DomUtil.getStyle(a,overflow-y)&&hidden!==o.DomUtil.getStyle(a,overflow)&&(s+=17)),a=a.parentNode}while(a);return new o.Point(s,n)},documentIsLtrfunction(){return o.DomUtil._docIsLtrCached(o.DomUtil._docIsLtrCached=!0,o.DomUtil._docIsLtr=ltr===o.DomUtil.getStyle(e.body,direction)),o.DomUtil._docIsLtr},createfunction(t,i,n){var o=e.createElement(t);return o.className=i,n&&n.appendChild(o),o},hasClassfunction(t,e){return t.className.length0&&new RegExp((^s)+e+(s$)).test(t.className)},addClassfunction(t,e){o.DomUtil.hasClass(t,e)(t.className+=(t.className )+e)},removeClassfunction(t,e){t.className=o.Util.trim(( +t.className+ ).replace( +e+ , ))},setOpacityfunction(t,e){if(opacityin t.style)t.style.opacity=e;else if(filterin t.style){var i=!1,n=DXImageTransform.Microsoft.Alpha;try{i=t.filters.item(n)}catch(o){if(1===e)return}e=Math.round(100e),i(i.Enabled=100!==e,i.Opacity=e)t.style.filter+= progid+n+(opacity=+e+)}},testPropfunction(t){for(var i=e.documentElement.style,n=0;nt.length;n++)if(t[n]in i)return t[n];return!1},getTranslateStringfunction(t){var e=o.Browser.webkit3d,i=translate+(e3d)+(,n=(e,0)+);return i+t.x+px,+t.y+px+n},getScaleStringfunction(t,e){var i=o.DomUtil.getTranslateString(e.add(e.multiplyBy(-1t))),n= scale(+t+) ;return i+n},setPositionfunction(t,e,i){t._leaflet_pos=e,!i&&o.Browser.any3d(t.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(e),o.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility=hidden))(t.style.left=e.x+px,t.style.top=e.y+px)},getPositionfunction(t){return t._leaflet_pos}},o.DomUtil.TRANSFORM=o.DomUtil.testProp([transform,WebkitTransform,OTransform,MozTransform,msTransform]),o.DomUtil.TRANSITION=o.DomUtil.testProp([webkitTransition,transition,OTransition,MozTransition,msTransition]),o.DomUtil.TRANSITION_END=webkitTransition===o.DomUtil.TRANSITIONOTransition===o.DomUtil.TRANSITIONo.DomUtil.TRANSITION+Endtransitionend,function(){var i=o.DomUtil.testProp([userSelect,WebkitUserSelect,OUserSelect,MozUserSelect,msUserSelect]);o.extend(o.DomUtil,{disableTextSelectionfunction(){if(o.DomEvent.on(t,selectstart,o.DomEvent.preventDefault),i){var n=e.documentElement.style;this._userSelect=n[i],n[i]=none}},enableTextSelectionfunction(){o.DomEvent.off(t,selectstart,o.DomEvent.preventDefault),i&&(e.documentElement.style[i]=this._userSelect,delete this._userSelect)},disableImageDragfunction(){o.DomEvent.on(t,dragstart,o.DomEvent.preventDefault)},enableImageDragfunction(){o.DomEvent.off(t,dragstart,o.DomEvent.preventDefault)}})}(),o.LatLng=function(t,e){var i=parseFloat(t),n=parseFloat(e);if(isNaN(i)isNaN(n))throw new Error(Invalid LatLng object (+t+, +e+));this.lat=i,this.lng=n},o.extend(o.LatLng,{DEG_TO_RADMath.PI180,RAD_TO_DEG180Math.PI,MAX_MARGIN1e-9}),o.LatLng.prototype={equalsfunction(t){if(!t)return!1;t=o.latLng(t);var e=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return e=o.LatLng.MAX_MARGIN},toStringfunction(t){returnLatLng(+o.Util.formatNum(this.lat,t)+, +o.Util.formatNum(this.lng,t)+)},distanceTofunction(t){t=o.latLng(t);var e=6378137,i=o.LatLng.DEG_TO_RAD,n=(t.lat-this.lat)i,s=(t.lng-this.lng)i,a=this.lati,r=t.lati,h=Math.sin(n2),l=Math.sin(s2),u=hh+llMath.cos(a)Math.cos(r);return 2eMath.atan2(Math.sqrt(u),Math.sqrt(1-u))},wrapfunction(t,e){var i=this.lng;return t=t-180,e=e180,i=(i+e)%(e-t)+(tii===eet),new o.LatLng(this.lat,i)}},o.latLng=function(t,e){return t instanceof o.LatLngto.Util.isArray(t)new o.LatLng(t[0],t[1])t===inull===ttobject==typeof t&&latin tnew o.LatLng(t.lat,lngin tt.lngt.lon)new o.LatLng(t,e)},o.LatLngBounds=function(t,e){if(t)for(var i=e[t,e]t,n=0,o=i.length;on;n++)this.extend(i[n])},o.LatLngBounds.prototype={extendfunction(t){return t(t=number==typeof t[0]string==typeof t[0]t instanceof o.LatLngo.latLng(t)o.latLngBounds(t),t instanceof o.LatLngthis._southWestthis._northEast(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng))(this._southWest=new o.LatLng(t.lat,t.lng),this._northEast=new o.LatLng(t.lat,t.lng))t instanceof o.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this)this},padfunction(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)t,s=Math.abs(e.lng-i.lng)t;return new o.LatLngBounds(new o.LatLng(e.lat-n,e.lng-s),new o.LatLng(i.lat+n,i.lng+s))},getCenterfunction(){return new o.LatLng((this._southWest.lat+this._northEast.lat)2,(this._southWest.lng+this._northEast.lng)2)},getSouthWestfunction(){return this._southWest},getNorthEastfunction(){return this._northEast},getNorthWestfunction(){return new o.LatLng(this.getNorth(),this.getWest())},getSouthEastfunction(){return new o.LatLng(this.getSouth(),this.getEast())},getWestfunction(){return this._southWest.lng},getSouthfunction(){return this._southWest.lat},getEastfunction(){return this._northEast.lng},getNorthfunction(){return this._northEast.lat},containsfunction(t){t=number==typeof t[0]t instanceof o.LatLngo.latLng(t)o.latLngBounds(t);var e,i,n=this._southWest,s=this._northEast;return t instanceof o.LatLngBounds(e=t.getSouthWest(),i=t.getNorthEast())e=i=t,e.lat=n.lat&&i.lat=s.lat&&e.lng=n.lng&&i.lng=s.lng},intersectsfunction(t){t=o.latLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),s=t.getNorthEast(),a=s.lat=e.lat&&n.lat=i.lat,r=s.lng=e.lng&&n.lng=i.lng;return a&&r},toBBoxStringfunction(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(,)},equalsfunction(t){return t(t=o.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))!1},isValidfunction(){return!(!this._southWest!this._northEast)}},o.latLngBounds=function(t,e){return!tt instanceof o.LatLngBoundstnew o.LatLngBounds(t,e)},o.Projection={},o.Projection.SphericalMercator={MAX_LATITUDE85.0511287798,projectfunction(t){var e=o.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),s=t.lnge,a=ne;return a=Math.log(Math.tan(Math.PI4+a2)),new o.Point(s,a)},unprojectfunction(t){var e=o.LatLng.RAD_TO_DEG,i=t.xe,n=(2Math.atan(Math.exp(t.y))-Math.PI2)e;return new o.LatLng(n,i)}},o.Projection.LonLat={projectfunction(t){return new o.Point(t.lng,t.lat)},unprojectfunction(t){return new o.LatLng(t.y,t.x)}},o.CRS={latLngToPointfunction(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLngfunction(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},projectfunction(t){return this.projection.project(t)},scalefunction(t){return 256Math.pow(2,t)}},o.CRS.Simple=o.extend({},o.CRS,{projectiono.Projection.LonLat,transformationnew o.Transformation(1,0,-1,0),scalefunction(t){return Math.pow(2,t)}}),o.CRS.EPSG3857=o.extend({},o.CRS,{codeEPSG3857,projectiono.Projection.SphericalMercator,transformationnew o.Transformation(.5Math.PI,.5,-.5Math.PI,.5),projectfunction(t){var e=this.projection.project(t),i=6378137;return e.multiplyBy(i)}}),o.CRS.EPSG900913=o.extend({},o.CRS.EPSG3857,{codeEPSG900913}),o.CRS.EPSG4326=o.extend({},o.CRS,{codeEPSG4326,projectiono.Projection.LonLat,transformationnew o.Transformation(1360,.5,-1360,.5)}),o.Map=o.Class.extend({includeso.Mixin.Events,options{crso.CRS.EPSG3857,fadeAnimationo.DomUtil.TRANSITION&&!o.Browser.android23,trackResize!0,markerZoomAnimationo.DomUtil.TRANSITION&&o.Browser.any3d},initializefunction(t,e){e=o.setOptions(this,e),this._initContainer(t),this._initLayout(),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&e.zoom!==i&&this.setView(o.latLng(e.center),e.zoom,{reset!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(e.layers)},setViewfunction(t,e){return this._resetView(o.latLng(t),this._limitZoom(e)),this},setZoomfunction(t,e){return this.setView(this.getCenter(),t,{zoome})},zoomInfunction(t,e){return this.setZoom(this._zoom+(t1),e)},zoomOutfunction(t,e){return this.setZoom(this._zoom-(t1),e)},setZoomAroundfunction(t,e,i){var n=this.getZoomScale(e),s=this.getSize().divideBy(2),a=t instanceof o.Pointtthis.latLngToContainerPoint(t),r=a.subtract(s).multiplyBy(1-1n),h=this.containerPointToLatLng(s.add(r));return this.setView(h,e,{zoomi})},fitBoundsfunction(t,e){e=e{},t=t.getBoundst.getBounds()o.latLngBounds(t);var i=o.point(e.paddingTopLefte.padding[0,0]),n=o.point(e.paddingBottomRighte.padding[0,0]),s=this.getBoundsZoom(t,!1,i.add(n)),a=n.subtract(i).divideBy(2),r=this.project(t.getSouthWest(),s),h=this.project(t.getNorthEast(),s),l=this.unproject(r.add(h).divideBy(2).add(a),s);return this.setView(l,s,e)},fitWorldfunction(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTofunction(t,e){return this.setView(t,this._zoom,{pane})},panByfunction(t){return this.fire(movestart),this._rawPanBy(o.point(t)),this.fire(move),this.fire(moveend)},setMaxBoundsfunction(t,e){if(t=o.latLngBounds(t),this.options.maxBounds=t,!t)return this._boundsMinZoom=null,this.off(moveend,this._panInsideMaxBounds,this),this;var i=this.getBoundsZoom(t,!0);return this._boundsMinZoom=i,this._loaded&&(this._zoomithis.setView(t.getCenter(),i,e)this.panInsideBounds(t)),this.on(moveend,this._panInsideMaxBounds,this),this},panInsideBoundsfunction(t){t=o.latLngBounds(t);var e=this.getPixelBounds(),i=e.getBottomLeft(),n=e.getTopRight(),s=this.project(t.getSouthWest()),a=this.project(t.getNorthEast()),r=0,h=0;return n.ya.y&&(h=Math.ceil(a.y-n.y)),n.xa.x&&(r=Math.floor(a.x-n.x)),i.ys.y&&(h=Math.floor(s.y-i.y)),i.xs.x&&(r=Math.ceil(s.x-i.x)),rhthis.panBy([r,h])this},addLayerfunction(t){var e=o.stamp(t);return this._layers[e]this(this._layers[e]=t,!t.optionsisNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)(this._zoomBoundLayers[e]=t,this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&t instanceof o.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on(load,this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(t),this)},removeLayerfunction(t){var e=o.stamp(t);if(this._layers[e])return this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&this.fire(layerremove,{layert}),this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&t instanceof o.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off(load,this._onTileLayerLoad,this)),this},hasLayerfunction(t){return to.stamp(t)in this._layers!1},eachLayerfunction(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},invalidateSizefunction(t){t=o.extend({animate!1,pan!0},t===!0{animate!0}t);var e=this.getSize();if(this._sizeChanged=!0,this.options.maxBounds&&this.setMaxBounds(this.options.maxBounds),!this._loaded)return this;var i=this.getSize(),n=e.subtract(i).divideBy(2).round();return n.xn.y(t.animate&&t.panthis.panBy(n)(t.pan&&this._rawPanBy(n),this.fire(move),clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o.bind(this.fire,this,moveend),200)),this.fire(resize,{oldSizee,newSizei}))this},addHandlerfunction(t,e){if(e){var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this}},removefunction(){return this._loaded&&this.fire(unload),this._initEvents(off),delete this._container._leaflet,this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenterfunction(){return this._checkIfLoaded(),this._moved()this.layerPointToLatLng(this._getCenterLayerPoint())this._initialCenter},getZoomfunction(){return this._zoom},getBoundsfunction(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new o.LatLngBounds(e,i)},getMinZoomfunction(){var t=this._layersMinZoom===i0this._layersMinZoom,e=this._boundsMinZoom===i0this._boundsMinZoom;return this.options.minZoom===iMath.max(t,e)this.options.minZoom},getMaxZoomfunction(){return this.options.maxZoom===ithis._layersMaxZoom===i10this._layersMaxZoomthis.options.maxZoom},getBoundsZoomfunction(t,e,i){t=o.latLngBounds(t);var n,s=this.getMinZoom()-(e10),a=this.getMaxZoom(),r=this.getSize(),h=t.getNorthWest(),l=t.getSouthEast(),u=!0;i=o.point(i[0,0]);do s++,n=this.project(l,s).subtract(this.project(h,s)).add(i),u=en.xr.xn.yr.yr.contains(n);while(u&&a=s);return u&&enulless-1},getSizefunction(){return(!this._sizethis._sizeChanged)&&(this._size=new o.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBoundsfunction(){var t=this._getTopLeftPoint();return new o.Bounds(t,t.add(this.getSize()))},getPixelOriginfunction(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanesfunction(){return this._panes},getContainerfunction(){return this._container},getZoomScalefunction(t){var e=this.options.crs;return e.scale(t)e.scale(this._zoom)},getScaleZoomfunction(t){return this._zoom+Math.log(t)Math.LN2},projectfunction(t,e){return e=e===ithis._zoome,this.options.crs.latLngToPoint(o.latLng(t),e)},unprojectfunction(t,e){return e=e===ithis._zoome,this.options.crs.pointToLatLng(o.point(t),e)},layerPointToLatLngfunction(t){var e=o.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPointfunction(t){var e=this.project(o.latLng(t))._round();return e._subtract(this.getPixelOrigin())},containerPointToLayerPointfunction(t){return o.point(t).subtract(this._getMapPanePos())},layerPointToContainerPointfunction(t){return o.point(t).add(this._getMapPanePos())},containerPointToLatLngfunction(t){var e=this.containerPointToLayerPoint(o.point(t));return this.layerPointToLatLng(e)},latLngToContainerPointfunction(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(o.latLng(t)))},mouseEventToContainerPointfunction(t){return o.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPointfunction(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLngfunction(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainerfunction(t){var e=this._container=o.DomUtil.get(t);if(!e)throw new Error(Map container not found.);if(e._leaflet)throw new Error(Map container is already initialized.);e._leaflet=!0},_initLayoutfunction(){var t=this._container;o.DomUtil.addClass(t,leaflet-container+(o.Browser.touch leaflet-touch)+(o.Browser.retina leaflet-retina)+(this.options.fadeAnimation leaflet-fade-anim));var e=o.DomUtil.getStyle(t,position);absolute!==e&&relative!==e&&fixed!==e&&(t.style.position=relative),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanesfunction(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane(leaflet-map-pane,this._container),this._tilePane=t.tilePane=this._createPane(leaflet-tile-pane,this._mapPane),t.objectsPane=this._createPane(leaflet-objects-pane,this._mapPane),t.shadowPane=this._createPane(leaflet-shadow-pane),t.overlayPane=this._createPane(leaflet-overlay-pane),t.markerPane=this._createPane(leaflet-marker-pane),t.popupPane=this._createPane(leaflet-popup-pane);var e= leaflet-zoom-hide;this.options.markerZoomAnimation(o.DomUtil.addClass(t.markerPane,e),o.DomUtil.addClass(t.shadowPane,e),o.DomUtil.addClass(t.popupPane,e))},_createPanefunction(t,e){return o.DomUtil.create(div,t,ethis._panes.objectsPane)},_clearPanesfunction(){this._container.removeChild(this._mapPane)},_addLayersfunction(t){t=to.Util.isArray(t)t[t][];for(var e=0,i=t.length;ie;e++)this.addLayer(t[e])},_resetViewfunction(t,e,i,n){var s=this._zoom!==e;n(this.fire(movestart),s&&this.fire(zoomstart)),this._zoom=e,this._initialCenter=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),ithis._initialTopLeftPoint._add(this._getMapPanePos())o.DomUtil.setPosition(this._mapPane,new o.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var a=!this._loaded;this._loaded=!0,a&&(this.fire(load),this.eachLayer(this._layerAdd,this)),this.fire(viewreset,{hard!i}),this.fire(move),(sn)&&this.fire(zoomend),this.fire(moveend,{hard!i})},_rawPanByfunction(t){o.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpanfunction(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevelsfunction(){var t,e=10,n=-10,o=this._getZoomSpan();for(t in this._zoomBoundLayers){var s=this._zoomBoundLayers[t];isNaN(s.options.minZoom)(e=Math.min(e,s.options.minZoom)),isNaN(s.options.maxZoom)(n=Math.max(n,s.options.maxZoom))}t===ithis._layersMaxZoom=this._layersMinZoom=i(this._layersMaxZoom=n,this._layersMinZoom=e),o!==this._getZoomSpan()&&this.fire(zoomlevelschange)},_panInsideMaxBoundsfunction(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoadedfunction(){if(!this._loaded)throw new Error(Set map center and zoom first.)},_initEventsfunction(e){if(o.DomEvent){e=eon,o.DomEvent[e](this._container,click,this._onMouseClick,this);var i,n,s=[dblclick,mousedown,mouseup,mouseenter,mouseleave,mousemove,contextmenu];for(i=0,n=s.length;ni;i++)o.DomEvent[e](this._container,s[i],this._fireMouseEvent,this);this.options.trackResize&&o.DomEvent[e](t,resize,this._onResize,this)}},_onResizefunction(){o.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=o.Util.requestAnimFrame(this.invalidateSize,this,!1,this._container)},_onMouseClickfunction(t){!this._loaded!t._simulated&&this.dragging&&this.dragging.moved()o.DomEvent._skipped(t)(this.fire(preclick),this._fireMouseEvent(t))},_fireMouseEventfunction(t){if(this._loaded&&!o.DomEvent._skipped(t)){var e=t.type;if(e=mouseenter===emouseovermouseleave===emouseoute,this.hasEventListeners(e)){contextmenu===e&&o.DomEvent.preventDefault(t);var i=this.mouseEventToContainerPoint(t),n=this.containerPointToLayerPoint(i),s=this.layerPointToLatLng(n);this.fire(e,{latlngs,layerPointn,containerPointi,originalEventt})}}},_onTileLayerLoadfunction(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire(tilelayersload)},_clearHandlersfunction(){for(var t=0,e=this._handlers.length;et;t++)this._handlers[t].disable()},whenReadyfunction(t,e){return this._loadedt.call(ethis,this)this.on(load,t,e),this},_layerAddfunction(t){t.onAdd(this),this.fire(layeradd,{layert})},_getMapPanePosfunction(){return o.DomUtil.getPosition(this._mapPane)},_movedfunction(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPointfunction(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPointfunction(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._round()},_latLngToNewLayerPointfunction(t,e,i){var n=this._getNewTopLeftPoint(i,e).add(this._getMapPanePos());return this.project(t,e)._subtract(n)},_getCenterLayerPointfunction(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffsetfunction(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitZoomfunction(t){var e=this.getMinZoom(),i=this.getMaxZoom();return Math.max(e,Math.min(i,t))}}),o.map=function(t,e){return new o.Map(t,e)},o.Projection.Mercator={MAX_LATITUDE85.0840591556,R_MINOR6356752.314245179,R_MAJOR6378137,projectfunction(t){var e=o.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),s=this.R_MAJOR,a=this.R_MINOR,r=t.lnges,h=ne,l=as,u=Math.sqrt(1-ll),c=uMath.sin(h);c=Math.pow((1-c)(1+c),.5u);var d=Math.tan(.5(.5Math.PI-h))c;return h=-sMath.log(d),new o.Point(r,h)},unprojectfunction(t){for(var e,i=o.LatLng.RAD_TO_DEG,n=this.R_MAJOR,s=this.R_MINOR,a=t.xin,r=sn,h=Math.sqrt(1-rr),l=Math.exp(-t.yn),u=Math.PI2-2Math.atan(l),c=15,d=1e-7,p=c,_=.1;Math.abs(_)d&&--p0;)e=hMath.sin(u),_=Math.PI2-2Math.atan(lMath.pow((1-e)(1+e),.5h))-u,u+=_;return new o.LatLng(ui,a)}},o.CRS.EPSG3395=o.extend({},o.CRS,{codeEPSG3395,projectiono.Projection.Mercator,transformationfunction(){var t=o.Projection.Mercator,e=t.R_MAJOR,i=t.R_MINOR;return new o.Transformation(.5(Math.PIe),.5,-.5(Math.PIi),.5)}()}),o.TileLayer=o.Class.extend({includeso.Mixin.Events,options{minZoom0,maxZoom18,tileSize256,subdomainsabc,errorTileUrl,attribution,zoomOffset0,opacity1,unloadInvisibleTileso.Browser.mobile,updateWhenIdleo.Browser.mobile},initializefunction(t,e){e=o.setOptions(this,e),e.detectRetina&&o.Browser.retina&&e.maxZoom0&&(e.tileSize=Math.floor(e.tileSize2),e.zoomOffset++,e.minZoom0&&e.minZoom--,this.options.maxZoom--),e.bounds&&(e.bounds=o.latLngBounds(e.bounds)),this._url=t;var i=this.options.subdomains;string==typeof i&&(this.options.subdomains=i.split())},onAddfunction(t){this._map=t,this._animated=t._zoomAnimated,this._initContainer(),this._createTileProto(),t.on({viewresetthis._reset,moveendthis._update},this),this._animated&&t.on({zoomanimthis._animateZoom,zoomendthis._endZoomAnim},this),this.options.updateWhenIdle(this._limitedUpdate=o.Util.limitExecByInterval(this._update,150,this),t.on(move,this._limitedUpdate,this)),this._reset(),this._update()
},addTofunction(t){return t.addLayer(this),this},onRemovefunction(t){this._container.parentNode.removeChild(this._container),t.off({viewresetthis._reset,moveendthis._update},this),this._animated&&t.off({zoomanimthis._animateZoom,zoomendthis._endZoomAnim},this),this.options.updateWhenIdlet.off(move,this._limitedUpdate,this),this._container=null,this._map=null},bringToFrontfunction(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBackfunction(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttributionfunction(){return this.options.attribution},getContainerfunction(){return this._container},setOpacityfunction(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndexfunction(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrlfunction(t,e){return this._url=t,ethis.redraw(),this},redrawfunction(){return this._map&&(this._reset({hard!0}),this._update()),this},_updateZIndexfunction(){this._container&&this.options.zIndex!==i&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndexfunction(t,e){var i,n,o,s=t.children,a=-e(10,-10);for(n=0,o=s.length;on;n++)s[n]!==this._container&&(i=parseInt(s[n].style.zIndex,10),isNaN(i)(a=e(a,i)));this.options.zIndex=this._container.style.zIndex=(isFinite(a)a0)+e(1,-1)},_updateOpacityfunction(){var t,e=this._tiles;if(o.Browser.ielt9)for(t in e)o.DomUtil.setOpacity(e[t],this.options.opacity);else o.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainerfunction(){var t=this._map._panes.tilePane;if(!this._container){if(this._container=o.DomUtil.create(div,leaflet-layer),this._updateZIndex(),this._animated){var e=leaflet-tile-container leaflet-zoom-animated;this._bgBuffer=o.DomUtil.create(div,e,this._container),this._tileContainer=o.DomUtil.create(div,e,this._container)}else this._tileContainer=this._container;t.appendChild(this._container),this.options.opacity1&&this._updateOpacity()}},_resetfunction(t){for(var e in this._tiles)this.fire(tileunload,{tilethis._tiles[e]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML=,this._animated&&t&&t.hard&&this._clearBgBuffer(),this._initContainer()},_updatefunction(){if(this._map){var t=this._map.getPixelBounds(),e=this._map.getZoom(),i=this.options.tileSize;if(!(ethis.options.maxZoomethis.options.minZoom)){var n=o.bounds(t.min.divideBy(i)._floor(),t.max.divideBy(i)._floor());this._addTilesFromCenterOut(n),(this.options.unloadInvisibleTilesthis.options.reuseTiles)&&this._removeOtherTiles(n)}}},_addTilesFromCenterOutfunction(t){var i,n,s,a=[],r=t.getCenter();for(i=t.min.y;i=t.max.y;i++)for(n=t.min.x;n=t.max.x;n++)s=new o.Point(n,i),this._tileShouldBeLoaded(s)&&a.push(s);var h=a.length;if(0!==h){a.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)});var l=e.createDocumentFragment();for(this._tilesToLoadthis.fire(loading),this._tilesToLoad+=h,n=0;hn;n++)this._addTile(a[n],l);this._tileContainer.appendChild(l)}},_tileShouldBeLoadedfunction(t){if(t.x++t.y in this._tiles)return!1;var e=this.options;if(!e.continuousWorld){var i=this._getWrapTileNum();if(e.noWrap&&(t.x0t.x=i)t.y0t.y=i)return!1}if(e.bounds){var n=e.tileSize,o=t.multiplyBy(n),s=o.add([n,n]),a=this._map.unproject(o),r=this._map.unproject(s);if(e.continuousWorlde.noWrap(a=a.wrap(),r=r.wrap()),!e.bounds.intersects([a,r]))return!1}return!0},_removeOtherTilesfunction(t){var e,i,n,o;for(o in this._tiles)e=o.split(),i=parseInt(e[0],10),n=parseInt(e[1],10),(it.min.xit.max.xnt.min.ynt.max.y)&&this._removeTile(o)},_removeTilefunction(t){var e=this._tiles[t];this.fire(tileunload,{tilee,urle.src}),this.options.reuseTiles(o.DomUtil.removeClass(e,leaflet-tile-loaded),this._unusedTiles.push(e))e.parentNode===this._tileContainer&&this._tileContainer.removeChild(e),o.Browser.android(e.onload=null,e.src=o.Util.emptyImageUrl),delete this._tiles[t]},_addTilefunction(t,e){var i=this._getTilePos(t),n=this._getTile();o.DomUtil.setPosition(n,i,o.Browser.chromeo.Browser.android23),this._tiles[t.x++t.y]=n,this._loadTile(n,t),n.parentNode!==this._tileContainer&&e.appendChild(n)},_getZoomForUrlfunction(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+t.zoomOffset},_getTilePosfunction(t){var e=this._map.getPixelOrigin(),i=this.options.tileSize;return t.multiplyBy(i).subtract(e)},getTileUrlfunction(t){return o.Util.template(this._url,o.extend({sthis._getSubdomain(t),zt.z,xt.x,yt.y},this.options))},_getWrapTileNumfunction(){return Math.pow(2,this._getZoomForUrl())},_adjustTilePointfunction(t){var e=this._getWrapTileNum();this.options.continuousWorldthis.options.noWrap(t.x=(t.x%e+e)%e),this.options.tms&&(t.y=e-t.y-1),t.z=this._getZoomForUrl()},_getSubdomainfunction(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_createTileProtofunction(){var t=this._tileImg=o.DomUtil.create(img,leaflet-tile);t.style.width=t.style.height=this.options.tileSize+px,t.galleryimg=no},_getTilefunction(){if(this.options.reuseTiles&&this._unusedTiles.length0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTilefunction(){},_createTilefunction(){var t=this._tileImg.cloneNode(!1);return t.onselectstart=t.onmousemove=o.Util.falseFn,o.Browser.ielt9&&this.options.opacity!==i&&o.DomUtil.setOpacity(t,this.options.opacity),t},_loadTilefunction(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,this._adjustTilePoint(e),t.src=this.getTileUrl(e)},_tileLoadedfunction(){this._tilesToLoad--,this._tilesToLoad(this.fire(load),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(o.bind(this._clearBgBuffer,this),500)))},_tileOnLoadfunction(){var t=this._layer;this.src!==o.Util.emptyImageUrl&&(o.DomUtil.addClass(this,leaflet-tile-loaded),t.fire(tileload,{tilethis,urlthis.src})),t._tileLoaded()},_tileOnErrorfunction(){var t=this._layer;t.fire(tileerror,{tilethis,urlthis.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),o.tileLayer=function(t,e){return new o.TileLayer(t,e)},o.TileLayer.WMS=o.TileLayer.extend({defaultWmsParams{serviceWMS,requestGetMap,version1.1.1,layers,styles,formatimagejpeg,transparent!1},initializefunction(t,e){this._url=t;var i=o.extend({},this.defaultWmsParams),n=e.tileSizethis.options.tileSize;i.width=i.height=e.detectRetina&&o.Browser.retina2nn;for(var s in e)this.options.hasOwnProperty(s)crs===s(i[s]=e[s]);this.wmsParams=i,o.setOptions(this,e)},onAddfunction(t){this._crs=this.options.crst.options.crs;var e=parseFloat(this.wmsParams.version)=1.3crssrs;this.wmsParams[e]=this._crs.code,o.TileLayer.prototype.onAdd.call(this,t)},getTileUrlfunction(t,e){var i=this._map,n=this.options.tileSize,s=t.multiplyBy(n),a=s.add([n,n]),r=this._crs.project(i.unproject(s,e)),h=this._crs.project(i.unproject(a,e)),l=[r.x,h.y,h.x,r.y].join(,),u=o.Util.template(this._url,{sthis._getSubdomain(t)});return u+o.Util.getParamString(this.wmsParams,u,!0)+&BBOX=+l},setParamsfunction(t,e){return o.extend(this.wmsParams,t),ethis.redraw(),this}}),o.tileLayer.wms=function(t,e){return new o.TileLayer.WMS(t,e)},o.TileLayer.Canvas=o.TileLayer.extend({options{async!1},initializefunction(t){o.setOptions(this,t)},redrawfunction(){this._map&&(this._reset({hard!0}),this._update());for(var t in this._tiles)this._redrawTile(this._tiles[t]);return this},_redrawTilefunction(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTileProtofunction(){var t=this._canvasProto=o.DomUtil.create(canvas,leaflet-tile);t.width=t.height=this.options.tileSize},_createTilefunction(){var t=this._canvasProto.cloneNode(!1);return t.onselectstart=t.onmousemove=o.Util.falseFn,t},_loadTilefunction(t,e){t._layer=this,t._tilePoint=e,this._redrawTile(t),this.options.asyncthis.tileDrawn(t)},drawTilefunction(){},tileDrawnfunction(t){this._tileOnLoad.call(t)}}),o.tileLayer.canvas=function(t){return new o.TileLayer.Canvas(t)},o.ImageOverlay=o.Class.extend({includeso.Mixin.Events,options{opacity1},initializefunction(t,e,i){this._url=t,this._bounds=o.latLngBounds(e),o.setOptions(this,i)},onAddfunction(t){this._map=t,this._imagethis._initImage(),t._panes.overlayPane.appendChild(this._image),t.on(viewreset,this._reset,this),t.options.zoomAnimation&&o.Browser.any3d&&t.on(zoomanim,this._animateZoom,this),this._reset()},onRemovefunction(t){t.getPanes().overlayPane.removeChild(this._image),t.off(viewreset,this._reset,this),t.options.zoomAnimation&&t.off(zoomanim,this._animateZoom,this)},addTofunction(t){return t.addLayer(this),this},setOpacityfunction(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFrontfunction(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBackfunction(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},_initImagefunction(){this._image=o.DomUtil.create(img,leaflet-image-layer),this._map.options.zoomAnimation&&o.Browser.any3do.DomUtil.addClass(this._image,leaflet-zoom-animated)o.DomUtil.addClass(this._image,leaflet-zoom-hide),this._updateOpacity(),o.extend(this._image,{galleryimgno,onselectstarto.Util.falseFn,onmousemoveo.Util.falseFn,onloado.bind(this._onImageLoad,this),srcthis._url})},_animateZoomfunction(t){var e=this._map,i=this._image,n=e.getZoomScale(t.zoom),s=this._bounds.getNorthWest(),a=this._bounds.getSouthEast(),r=e._latLngToNewLayerPoint(s,t.zoom,t.center),h=e._latLngToNewLayerPoint(a,t.zoom,t.center)._subtract(r),l=r._add(h._multiplyBy(.5(1-1n)));i.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(l)+ scale(+n+) },_resetfunction(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),i=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);o.DomUtil.setPosition(t,e),t.style.width=i.x+px,t.style.height=i.y+px},_onImageLoadfunction(){this.fire(load)},_updateOpacityfunction(){o.DomUtil.setOpacity(this._image,this.options.opacity)}}),o.imageOverlay=function(t,e,i){return new o.ImageOverlay(t,e,i)},o.Icon=o.Class.extend({options{className},initializefunction(t){o.setOptions(this,t)},createIconfunction(t){return this._createIcon(icon,t)},createShadowfunction(t){return this._createIcon(shadow,t)},_createIconfunction(t,e){var i=this._getIconUrl(t);if(!i){if(icon===t)throw new Error(iconUrl not set in Icon options (see the docs).);return null}var n;return n=e&&IMG===e.tagNamethis._createImg(i,e)this._createImg(i),this._setIconStyles(n,t),n},_setIconStylesfunction(t,e){var i,n=this.options,s=o.point(n[e+Size]);i=shadow===eo.point(n.shadowAnchorn.iconAnchor)o.point(n.iconAnchor),!i&&s&&(i=s.divideBy(2,!0)),t.className=leaflet-marker-+e+ +n.className,i&&(t.style.marginLeft=-i.x+px,t.style.marginTop=-i.y+px),s&&(t.style.width=s.x+px,t.style.height=s.y+px)},_createImgfunction(t,i){return o.Browser.ie6(i(i=e.createElement(div)),i.style.filter='progidDXImageTransform.Microsoft.AlphaImageLoader(src='+t+')')(i(i=e.createElement(img)),i.src=t),i},_getIconUrlfunction(t){return o.Browser.retina&&this.options[t+RetinaUrl]this.options[t+RetinaUrl]this.options[t+Url]}}),o.icon=function(t){return new o.Icon(t)},o.Icon.Default=o.Icon.extend({options{iconSize[25,41],iconAnchor[12,41],popupAnchor[1,-34],shadowSize[41,41]},_getIconUrlfunction(t){var e=t+Url;if(this.options[e])return this.options[e];o.Browser.retina&&icon===t&&(t+=-2x);var i=o.Icon.Default.imagePath;if(!i)throw new Error(Couldn't autodetect L.Icon.Default.imagePath, set it manually.);return i+marker-+t+.png}}),o.Icon.Default.imagePath=function(){var t,i,n,o,s,a=e.getElementsByTagName(script),r=[^]leaflet[-._]([w-._]).js;for(t=0,i=a.length;it;t++)if(n=a[t].src,o=n.match(r))return s=n.split(r)[0],(ss+)+images}(),o.Marker=o.Class.extend({includeso.Mixin.Events,options{iconnew o.Icon.Default,title,clickable!0,draggable!1,keyboard!0,zIndexOffset0,opacity1,riseOnHover!1,riseOffset250},initializefunction(t,e){o.setOptions(this,e),this._latlng=o.latLng(t)},onAddfunction(t){this._map=t,t.on(viewreset,this.update,this),this._initIcon(),this.update(),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on(zoomanim,this._animateZoom,this)},addTofunction(t){return t.addLayer(this),this},onRemovefunction(t){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire(remove),t.off({viewresetthis.update,zoomanimthis._animateZoom},this),this._map=null},getLatLngfunction(){return this._latlng},setLatLngfunction(t){return this._latlng=o.latLng(t),this.update(),this.fire(move,{latlngthis._latlng})},setZIndexOffsetfunction(t){return this.options.zIndexOffset=t,this.update(),this},setIconfunction(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this},updatefunction(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIconfunction(){var t=this.options,e=this._map,i=e.options.zoomAnimation&&e.options.markerZoomAnimation,n=ileaflet-zoom-animatedleaflet-zoom-hide,s=t.icon.createIcon(this._icon),a=!1;s!==this._icon&&(this._icon&&this._removeIcon(),a=!0,t.title&&(s.title=t.title)),o.DomUtil.addClass(s,n),t.keyboard&&(s.tabIndex=0),this._icon=s,this._initInteraction(),t.riseOnHover&&o.DomEvent.on(s,mouseover,this._bringToFront,this).on(s,mouseout,this._resetZIndex,this);var r=t.icon.createShadow(this._shadow),h=!1;r!==this._shadow&&(this._removeShadow(),h=!0),r&&o.DomUtil.addClass(r,n),this._shadow=r,t.opacity1&&this._updateOpacity();var l=this._map._panes;a&&l.markerPane.appendChild(this._icon),r&&h&&l.shadowPane.appendChild(this._shadow)},_removeIconfunction(){this.options.riseOnHover&&o.DomEvent.off(this._icon,mouseover,this._bringToFront).off(this._icon,mouseout,this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadowfunction(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPosfunction(t){o.DomUtil.setPosition(this._icon,t),this._shadow&&o.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndexfunction(t){this._icon.style.zIndex=this._zIndex+t},_animateZoomfunction(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPos(e)},_initInteractionfunction(){if(this.options.clickable){var t=this._icon,e=[dblclick,mousedown,mouseover,mouseout,contextmenu];o.DomUtil.addClass(t,leaflet-clickable),o.DomEvent.on(t,click,this._onMouseClick,this),o.DomEvent.on(t,keypress,this._onKeyPress,this);for(var i=0;ie.length;i++)o.DomEvent.on(t,e[i],this._fireMouseEvent,this);o.Handler.MarkerDrag&&(this.dragging=new o.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClickfunction(t){var e=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)e)&&o.DomEvent.stopPropagation(t),e(this.dragging&&this.dragging._enabled!this._map.dragging!this._map.dragging.moved())&&this.fire(t.type,{originalEventt,latlngthis._latlng})},_onKeyPressfunction(t){13===t.keyCode&&this.fire(click,{originalEventt,latlngthis._latlng})},_fireMouseEventfunction(t){this.fire(t.type,{originalEventt,latlngthis._latlng}),contextmenu===t.type&&this.hasEventListeners(t.type)&&o.DomEvent.preventDefault(t),mousedown!==t.typeo.DomEvent.stopPropagation(t)o.DomEvent.preventDefault(t)},setOpacityfunction(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacityfunction(){o.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&o.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFrontfunction(){this._updateZIndex(this.options.riseOffset)},_resetZIndexfunction(){this._updateZIndex(0)}}),o.marker=function(t,e){return new o.Marker(t,e)},o.DivIcon=o.Icon.extend({options{iconSize[12,12],classNameleaflet-div-icon,html!1},createIconfunction(t){var i=t&&DIV===t.tagNamete.createElement(div),n=this.options;return i.innerHTML=n.html!==!1n.html,n.bgPos&&(i.style.backgroundPosition=-n.bgPos.x+px +-n.bgPos.y+px),this._setIconStyles(i,icon),i},createShadowfunction(){return null}}),o.divIcon=function(t){return new o.DivIcon(t)},o.Map.mergeOptions({closePopupOnClick!0}),o.Popup=o.Class.extend({includeso.Mixin.Events,options{minWidth50,maxWidth300,maxHeightnull,autoPan!0,closeButton!0,offset[0,7],autoPanPadding[5,5],keepInView!1,className,zoomAnimation!0},initializefunction(t,e){o.setOptions(this,t),this._source=e,this._animated=o.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAddfunction(t){this._map=t,this._containerthis._initLayout(),this._updateContent();var e=t.options.fadeAnimation;e&&o.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on(this._getEvents(),this),this._update(),e&&o.DomUtil.setOpacity(this._container,1),this.fire(open),t.fire(popupopen,{popupthis}),this._source&&this._source.fire(popupopen,{popupthis})},addTofunction(t){return t.addLayer(this),this},openOnfunction(t){return t.openPopup(this),this},onRemovefunction(t){t._panes.popupPane.removeChild(this._container),o.Util.falseFn(this._container.offsetWidth),t.off(this._getEvents(),this),t.options.fadeAnimation&&o.DomUtil.setOpacity(this._container,0),this._map=null,this.fire(close),t.fire(popupclose,{popupthis}),this._source&&this._source.fire(popupclose,{popupthis})},setLatLngfunction(t){return this._latlng=o.latLng(t),this._update(),this},setContentfunction(t){return this._content=t,this._update(),this},_getEventsfunction(){var t={viewresetthis._updatePosition};return this._animated&&(t.zoomanim=this._zoomAnimation),(closeOnClickin this.optionsthis.options.closeOnClickthis._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_closefunction(){this._map&&this._map.closePopup(this)},_initLayoutfunction(){var t,e=leaflet-popup,i=e+ +this.options.className+ leaflet-zoom-+(this._animatedanimatedhide),n=this._container=o.DomUtil.create(div,i);this.options.closeButton&&(t=this._closeButton=o.DomUtil.create(a,e+-close-button,n),t.href=#close,t.innerHTML=&#215;,o.DomEvent.disableClickPropagation(t),o.DomEvent.on(t,click,this._onCloseButtonClick,this));var s=this._wrapper=o.DomUtil.create(div,e+-content-wrapper,n);o.DomEvent.disableClickPropagation(s),this._contentNode=o.DomUtil.create(div,e+-content,s),o.DomEvent.on(this._contentNode,mousewheel,o.DomEvent.stopPropagation),o.DomEvent.on(this._contentNode,MozMousePixelScroll,o.DomEvent.stopPropagation),o.DomEvent.on(s,contextmenu,o.DomEvent.stopPropagation),this._tipContainer=o.DomUtil.create(div,e+-tip-container,n),this._tip=o.DomUtil.create(div,e+-tip,this._tipContainer)},_updatefunction(){this._map&&(this._container.style.visibility=hidden,this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility=,this._adjustPan())},_updateContentfunction(){if(this._content){if(string==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire(contentupdate)}},_updateLayoutfunction(){var t=this._contentNode,e=t.style;e.width=,e.whiteSpace=nowrap;var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+px,e.whiteSpace=,e.height=;var n=t.offsetHeight,s=this.options.maxHeight,a=leaflet-popup-scrolled;s&&ns(e.height=s+px,o.DomUtil.addClass(t,a))o.DomUtil.removeClass(t,a),this._containerWidth=this._container.offsetWidth},_updatePositionfunction(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,i=o.point(this.options.offset);e&&o.DomUtil.setPosition(this._container,t),this._containerBottom=-i.y-(e0t.y),this._containerLeft=-Math.round(this._containerWidth2)+i.x+(e0t.x),this._container.style.bottom=this._containerBottom+px,this._container.style.left=this._containerLeft+px}},_zoomAnimationfunction(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);o.DomUtil.setPosition(this._container,e)},_adjustPanfunction(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,i=this._containerWidth,n=new o.Point(this._containerLeft,-e-this._containerBottom);this._animated&&n._add(o.DomUtil.getPosition(this._container));var s=t.layerPointToContainerPoint(n),a=o.point(this.options.autoPanPadding),r=t.getSize(),h=0,l=0;s.x+ir.x&&(h=s.x+i-r.x+a.x),s.x-h0&&(h=s.x-a.x),s.y+er.y&&(l=s.y+e-r.y+a.y),s.y-l0&&(l=s.y-a.y),(hl)&&t.fire(autopanstart).panBy([h,l])}},_onCloseButtonClickfunction(t){this._close(),o.DomEvent.stop(t)}}),o.popup=function(t,e){return new o.Popup(t,e)},o.Map.include({openPopupfunction(t,e,i){if(this.closePopup(),!(t instanceof o.Popup)){var n=t;t=new o.Popup(i).setLatLng(e).setContent(n)}return t._isOpen=!0,this._popup=t,this.addLayer(t)},closePopupfunction(t){return t&&t!==this._popup(t=this._popup,this._popup=null),t&&(this.removeLayer(t),t._isOpen=!1),this}}),o.Marker.include({openPopupfunction(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopupfunction(){return this._popup&&this._popup._close(),this},togglePopupfunction(){return this._popup&&(this._popup._isOpenthis.closePopup()this.openPopup()),this},bindPopupfunction(t,e){var i=o.point(this.options.icon.options.popupAnchor[0,0]);return i=i.add(o.Popup.prototype.options.offset),e&&e.offset&&(i=i.add(e.offset)),e=o.extend({offseti},e),this._popupthis.on(click,this.togglePopup,this).on(remove,this.closePopup,this).on(move,this._movePopup,this),t instanceof o.Popup(o.setOptions(t,e),this._popup=t)this._popup=new o.Popup(e,this).setContent(t),this},setPopupContentfunction(t){return this._popup&&this._popup.setContent(t),this},unbindPopupfunction(){return this._popup&&(this._popup=null,this.off(click,this.togglePopup).off(remove,this.closePopup).off(move,this._movePopup)),this},_movePopupfunction(t){this._popup.setLatLng(t.latlng)}}),o.LayerGroup=o.Class.extend({initializefunction(t){this._layers={};var e,i;if(t)for(e=0,i=t.length;ie;e++)this.addLayer(t[e])},addLayerfunction(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayerfunction(t){var e=t in this._layerstthis.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayerfunction(t){return tt in this._layersthis.getLayerId(t)in this._layers!1},clearLayersfunction(){return this.eachLayer(this.removeLayer,this),this},invokefunction(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)i=this._layers[e],i[t]&&i[t].apply(i,n);return this},onAddfunction(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemovefunction(t){this.eachLayer(t.removeLayer,t),this._map=null},addTofunction(t){return t.addLayer(this),this},eachLayerfunction(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayerfunction(t){return this._layers[t]},getLayersfunction(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndexfunction(t){return this.invoke(setZIndex,t)},getLayerIdfunction(t){return o.stamp(t)}}),o.layerGroup=function(t){return new o.LayerGroup(t)},o.FeatureGroup=o.LayerGroup.extend({includeso.Mixin.Events,statics{EVENTSclick dblclick mouseover mouseout mousemove contextmenu popupopen popupclose},addLayerfunction(t){return this.hasLayer(t)this(t.on(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire(layeradd,{layert}))},removeLayerfunction(t){return this.hasLayer(t)(t in this._layers&&(t=this._layers[t]),t.off(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke(unbindPopup),this.fire(layerremove,{layert}))this},bindPopupfunction(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke(bindPopup,t,e)},setStylefunction(t){return this.invoke(setStyle,t)},bringToFrontfunction(){return this.invoke(bringToFront)},bringToBackfunction(){return this.invoke(bringToBack)},getBoundsfunction(){var t=new o.LatLngBounds;return this.eachLayer(function(e){t.extend(e instanceof o.Markere.getLatLng()e.getBounds())}),t},_propagateEventfunction(t){t.layer(t.layer=t.target),t.target=this,this.fire(t.type,t)}}),o.featureGroup=function(t){return new o.FeatureGroup(t)},o.Path=o.Class.extend({includes[o.Mixin.Events],statics{CLIP_PADDINGfunction(){var e=o.Browser.mobile12802e3,i=(eMath.max(t.outerWidth,t.outerHeight)-1)2;return Math.max(0,Math.min(.5,i))}()},options{stroke!0,color#0033ff,dashArraynull,weight5,opacity.5,fill!1,fillColornull,fillOpacity.2,clickable!0},initializefunction(t){o.setOptions(this,t)},onAddfunction(t){this._map=t,this._container(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire(add),t.on({viewresetthis.projectLatlngs,moveendthis._updatePath},this)},addTofunction(t){return t.addLayer(this),this},onRemovefunction(t){t._pathRoot.removeChild(this._container),this.fire(remove),this._map=null,o.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewresetthis.projectLatlngs,moveendthis._updatePath},this)},projectLatlngsfunction(){},setStylefunction(t){return o.setOptions(this,t),this._container&&this._updateStyle(),this},redrawfunction(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),o.Map.include({_updatePathViewportfunction(){var t=o.Path.CLIP_PADDING,e=this.getSize(),i=o.DomUtil.getPosition(this._mapPane),n=i.multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),s=n.add(e.multiplyBy(1+2t)._round());this._pathViewport=new o.Bounds(n,s)}}),o.Path.SVG_NS=httpwww.w3.org2000svg,o.Browser.svg=!(!e.createElementNS!e.createElementNS(o.Path.SVG_NS,svg).createSVGRect),o.Path=o.Path.extend({statics{SVGo.Browser.svg},bringToFrontfunction(){var t=this._map._pathRoot,e=this._container;return e&&t.lastChild!==e&&t.appendChild(e),this},bringToBackfunction(){var t=this._map._pathRoot,e=this._container,i=t.firstChild;return e&&i!==e&&t.insertBefore(e,i),this},getPathStringfunction(){},_createElementfunction(t){return e.createElementNS(o.Path.SVG_NS,t)},_initElementsfunction(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPathfunction(){this._container=this._createElement(g),this._path=this._createElement(path),this._container.appendChild(this._path)},_initStylefunction(){this.options.stroke&&(this._path.setAttribute(stroke-linejoin,round),this._path.setAttribute(stroke-linecap,round)),this.options.fill&&this._path.setAttribute(fill-rule,evenodd),this.options.pointerEvents&&this._path.setAttribute(pointer-events,this.options.pointerEvents),this.options.clickablethis.options.pointerEventsthis._path.setAttribute(pointer-events,none),this._updateStyle()},_updateStylefunction(){this.options.stroke(this._path.setAttribute(stroke,this.options.color),this._path.setAttribute(stroke-opacity,this.options.opacity),this._path.setAttribute(stroke-width,this.options.weight),this.options.dashArraythis._path.setAttribute(stroke-dasharray,this.options.dashArray)this._path.removeAttribute(stroke-dasharray))this._path.setAttribute(stroke,none),this.options.fill(this._path.setAttribute(fill,this.options.fillColorthis.options.color),this._path.setAttribute(fill-opacity,this.options.fillOpacity))this._path.setAttribute(fill,none)},_updatePathfunction(){var t=this.getPathString();t(t=M0 0),this._path.setAttribute(d,t)},_initEventsfunction(){if(this.options.clickable){(o.Browser.svg!o.Browser.vml)&&this._path.setAttribute(class,leaflet-clickable),o.DomEvent.on(this._container,click,this._onMouseClick,this);for(var t=[dblclick,mousedown,mouseover,mouseout,mousemove,contextmenu],e=0;et.length;e++)o.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClickfunction(t){this._map.dragging&&this._map.dragging.moved()this._fireMouseEvent(t)},_fireMouseEventfunction(t){if(this.hasEventListeners(t.type)){var e=this._map,i=e.mouseEventToContainerPoint(t),n=e.containerPointToLayerPoint(i),s=e.layerPointToLatLng(n);this.fire(t.type,{latlngs,layerPointn,containerPointi,originalEventt}),contextmenu===t.type&&o.DomEvent.preventDefault(t),mousemove!==t.type&&o.DomEvent.stopPropagation(t)}}}),o.Map.include({_initPathRootfunction(){this._pathRoot(this._pathRoot=o.Path.prototype._createElement(svg),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&o.Browser.any3d(this._pathRoot.setAttribute(class, leaflet-zoom-animated),this.on({zoomanimthis._animatePathZoom,zoomendthis._endPathZoom}))this._pathRoot.setAttribute(class, leaflet-zoom-hide),this.on(moveend,this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoomfunction(t){var e=this.getZoomScale(t.zoom),i=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(i)+ scale(+e+) ,this._pathZooming=!0},_endPathZoomfunction(){this._pathZooming=!1},_updateSvgViewportfunction(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max,n=i.x-e.x,s=i.y-e.y,a=this._pathRoot,r=this._panes.overlayPane;o.Browser.mobileWebkit&&r.removeChild(a),o.DomUtil.setPosition(a,e),a.setAttribute(width,n),a.setAttribute(height,s),a.setAttribute(viewBox,[e.x,e.y,n,s].join( )),o.Browser.mobileWebkit&&r.appendChild(a)}}}),o.Path.include({bindPopupfunction(t,e){return t instanceof o.Popupthis._popup=t((!this._popupe)&&(this._popup=new o.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded(this.on(click,this._openPopup,this).on(remove,this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopupfunction(){return this._popup&&(this._popup=null,this.off(click,this._openPopup).off(remove,this.closePopup),this._popupHandlersAdded=!1),this},openPopupfunction(t){return this._popup&&(t=tthis._latlngthis._latlngs[Math.floor(this._latlngs.length2)],this._openPopup({latlngt})),this},closePopupfunction(){return this._popup&&this._popup._close(),this},_openPopupfunction(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),o.Browser.vml=!o.Browser.svg&&function(){try{var t=e.createElement(div);t.innerHTML='vshape adj=1';var i=t.firstChild;return i.style.behavior=url(#default#VML),i&&object==typeof i.adj}catch(n){return!1}}(),o.Path=o.Browser.svg!o.Browser.vmlo.Patho.Path.extend({statics{VML!0,CLIP_PADDING.02},_createElementfunction(){try{return e.namespaces.add(lvml,urnschemas-microsoft-comvml),function(t){return e.createElement(lvml+t+' class=lvml')}}catch(t){return function(t){return e.createElement(+t+' xmlns=urnschemas-microsoft.comvml class=lvml')}}}(),_initPathfunction(){var t=this._container=this._createElement(shape);
o.DomUtil.addClass(t,leaflet-vml-shape),this.options.clickable&&o.DomUtil.addClass(t,leaflet-clickable),t.coordsize=1 1,this._path=this._createElement(path),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStylefunction(){this._updateStyle()},_updateStylefunction(){var t=this._stroke,e=this._fill,i=this.options,n=this._container;n.stroked=i.stroke,n.filled=i.fill,i.stroke(t(t=this._stroke=this._createElement(stroke),t.endcap=round,n.appendChild(t)),t.weight=i.weight+px,t.color=i.color,t.opacity=i.opacity,t.dashStyle=i.dashArrayi.dashArray instanceof Arrayi.dashArray.join( )i.dashArray.replace(( , )g, ))t&&(n.removeChild(t),this._stroke=null),i.fill(e(e=this._fill=this._createElement(fill),n.appendChild(e)),e.color=i.fillColori.color,e.opacity=i.fillOpacity)e&&(n.removeChild(e),this._fill=null)},_updatePathfunction(){var t=this._container.style;t.display=none,this._path.v=this.getPathString()+ ,t.display=}}),o.Map.include(o.Browser.svg!o.Browser.vml{}{_initPathRootfunction(){if(!this._pathRoot){var t=this._pathRoot=e.createElement(div);t.className=leaflet-vml-container,this._panes.overlayPane.appendChild(t),this.on(moveend,this._updatePathViewport),this._updatePathViewport()}}}),o.Browser.canvas=function(){return!!e.createElement(canvas).getContext}(),o.Path=o.Path.SVG&&!t.L_PREFER_CANVAS!o.Browser.canvaso.Patho.Path.extend({statics{CANVAS!0,SVG!1},redrawfunction(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStylefunction(t){return o.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemovefunction(t){t.off(viewreset,this.projectLatlngs,this).off(moveend,this._updatePath,this),this.options.clickable&&(this._map.off(click,this._onClick,this),this._map.off(mousemove,this._onMouseMove,this)),this._requestUpdate(),this._map=null},_requestUpdatefunction(){this._map&&!o.Path._updateRequest&&(o.Path._updateRequest=o.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEndfunction(){o.Path._updateRequest=null,this.fire(moveend)},_initElementsfunction(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStylefunction(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColort.color)},_drawPathfunction(){var t,e,i,n,s,a;for(this._ctx.beginPath(),t=0,i=this._parts.length;it;t++){for(e=0,n=this._parts[t].length;ne;e++)s=this._parts[t][e],a=(0===emoveline)+To,this._ctx[a](s.x,s.y);this instanceof o.Polygon&&this._ctx.closePath()}},_checkIfEmptyfunction(){return!this._parts.length},_updatePathfunction(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(t.globalAlpha=e.fillOpacity,t.fill()),e.stroke&&(t.globalAlpha=e.opacity,t.stroke()),t.restore()}},_initEventsfunction(){this.options.clickable&&(this._map.on(mousemove,this._onMouseMove,this),this._map.on(click,this._onClick,this))},_onClickfunction(t){this._containsPoint(t.layerPoint)&&this.fire(click,t)},_onMouseMovefunction(t){this._map&&!this._map._animatingZoom&&(this._containsPoint(t.layerPoint)(this._ctx.canvas.style.cursor=pointer,this._mouseInside=!0,this.fire(mouseover,t))this._mouseInside&&(this._ctx.canvas.style.cursor=,this._mouseInside=!1,this.fire(mouseout,t)))}}),o.Map.include(o.Path.SVG&&!t.L_PREFER_CANVAS!o.Browser.canvas{}{_initPathRootfunction(){var t,i=this._pathRoot;i(i=this._pathRoot=e.createElement(canvas),i.style.position=absolute,t=this._canvasCtx=i.getContext(2d),t.lineCap=round,t.lineJoin=round,this._panes.overlayPane.appendChild(i),this.options.zoomAnimation&&(this._pathRoot.className=leaflet-zoom-animated,this.on(zoomanim,this._animatePathZoom),this.on(zoomend,this._endPathZoom)),this.on(moveend,this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewportfunction(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max.subtract(e),n=this._pathRoot;o.DomUtil.setPosition(n,e),n.width=i.x,n.height=i.y,n.getContext(2d).translate(-e.x,-e.y)}}}),o.LineUtil={simplifyfunction(t,e){if(!e!t.length)return t.slice();var i=ee;return t=this._reducePoints(t,i),t=this._simplifyDP(t,i)},pointToSegmentDistancefunction(t,e,i){return Math.sqrt(this._sqClosestPointOnSegment(t,e,i,!0))},closestPointOnSegmentfunction(t,e,i){return this._sqClosestPointOnSegment(t,e,i)},_simplifyDPfunction(t,e){var n=t.length,o=typeof Uint8Array!=i+Uint8ArrayArray,s=new o(n);s[0]=s[n-1]=1,this._simplifyDPStep(t,s,e,0,n-1);var a,r=[];for(a=0;na;a++)s[a]&&r.push(t[a]);return r},_simplifyDPStepfunction(t,e,i,n,o){var s,a,r,h=0;for(a=n+1;o-1=a;a++)r=this._sqClosestPointOnSegment(t[a],t[n],t[o],!0),rh&&(s=a,h=r);hi&&(e[s]=1,this._simplifyDPStep(t,e,i,n,s),this._simplifyDPStep(t,e,i,s,o))},_reducePointsfunction(t,e){for(var i=[t[0]],n=1,o=0,s=t.length;sn;n++)this._sqDist(t[n],t[o])e&&(i.push(t[n]),o=n);return s-1o&&i.push(t[s-1]),i},clipSegmentfunction(t,e,i,n){var o,s,a,r=nthis._lastCodethis._getBitCode(t,i),h=this._getBitCode(e,i);for(this._lastCode=h;;){if(!(rh))return[t,e];if(r&h)return!1;o=rh,s=this._getEdgeIntersection(t,e,o,i),a=this._getBitCode(s,i),o===r(t=s,r=a)(e=s,h=a)}},_getEdgeIntersectionfunction(t,e,i,n){var s=e.x-t.x,a=e.y-t.y,r=n.min,h=n.max;return 8&inew o.Point(t.x+s(h.y-t.y)a,h.y)4&inew o.Point(t.x+s(r.y-t.y)a,r.y)2&inew o.Point(h.x,t.y+a(h.x-t.x)s)1&inew o.Point(r.x,t.y+a(r.x-t.x)s)void 0},_getBitCodefunction(t,e){var i=0;return t.xe.min.xi=1t.xe.max.x&&(i=2),t.ye.min.yi=4t.ye.max.y&&(i=8),i},_sqDistfunction(t,e){var i=e.x-t.x,n=e.y-t.y;return ii+nn},_sqClosestPointOnSegmentfunction(t,e,i,n){var s,a=e.x,r=e.y,h=i.x-a,l=i.y-r,u=hh+ll;return u0&&(s=((t.x-a)h+(t.y-r)l)u,s1(a=i.x,r=i.y)s0&&(a+=hs,r+=ls)),h=t.x-a,l=t.y-r,nhh+llnew o.Point(a,r)}},o.Polyline=o.Path.extend({initializefunction(t,e){o.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t)},options{smoothFactor1,noClip!1},projectLatlngsfunction(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;et;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathStringfunction(){for(var t=0,e=this._parts.length,i=;et;t++)i+=this._getPathPartStr(this._parts[t]);return i},getLatLngsfunction(){return this._latlngs},setLatLngsfunction(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLngfunction(t){return this._latlngs.push(o.latLng(t)),this.redraw()},spliceLatLngsfunction(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),t},closestLayerPointfunction(t){for(var e,i,n=10,s=this._parts,a=null,r=0,h=s.length;hr;r++)for(var l=s[r],u=1,c=l.length;cu;u++){e=l[u-1],i=l[u];var d=o.LineUtil._sqClosestPointOnSegment(t,e,i,!0);nd&&(n=d,a=o.LineUtil._sqClosestPointOnSegment(t,e,i))}return a&&(a.distance=Math.sqrt(n)),a},getBoundsfunction(){return new o.LatLngBounds(this.getLatLngs())},_convertLatLngsfunction(t,e){var i,n,s=et[];for(i=0,n=t.length;ni;i++){if(o.Util.isArray(t[i])&&number!=typeof t[i][0])return;s[i]=o.latLng(t[i])}return s},_initEventsfunction(){o.Path.prototype._initEvents.call(this)},_getPathPartStrfunction(t){for(var e,i=o.Path.VML,n=0,s=t.length,a=;sn;n++)e=t[n],i&&e._round(),a+=(nLM)+e.x+ +e.y;return a},_clipPointsfunction(){var t,e,i,n=this._originalPoints,s=n.length;if(this.options.noClip)return this._parts=[n],void 0;this._parts=[];var a=this._parts,r=this._map._pathViewport,h=o.LineUtil;for(t=0,e=0;s-1t;t++)i=h.clipSegment(n[t],n[t+1],r,t),i&&(a[e]=a[e][],a[e].push(i[0]),(i[1]!==n[t+1]t===s-2)&&(a[e].push(i[1]),e++))},_simplifyPointsfunction(){for(var t=this._parts,e=o.LineUtil,i=0,n=t.length;ni;i++)t[i]=e.simplify(t[i],this.options.smoothFactor)},_updatePathfunction(){this._map&&(this._clipPoints(),this._simplifyPoints(),o.Path.prototype._updatePath.call(this))}}),o.polyline=function(t,e){return new o.Polyline(t,e)},o.PolyUtil={},o.PolyUtil.clipPolygon=function(t,e){var i,n,s,a,r,h,l,u,c,d=[1,4,2,8],p=o.LineUtil;for(n=0,l=t.length;ln;n++)t[n]._code=p._getBitCode(t[n],e);for(a=0;4a;a++){for(u=d[a],i=[],n=0,l=t.length,s=l-1;ln;s=n++)r=t[n],h=t[s],r._code&uh._code&u(c=p._getEdgeIntersection(h,r,u,e),c._code=p._getBitCode(c,e),i.push(c))(h._code&u&&(c=p._getEdgeIntersection(h,r,u,e),c._code=p._getBitCode(c,e),i.push(c)),i.push(r));t=i}return t},o.Polygon=o.Polyline.extend({options{fill!0},initializefunction(t,e){var i,n,s;if(o.Polyline.prototype.initialize.call(this,t,e),t&&o.Util.isArray(t[0])&&number!=typeof t[0][0])for(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1),i=0,n=this._holes.length;ni;i++)s=this._holes[i]=this._convertLatLngs(this._holes[i]),s[0].equals(s[s.length-1])&&s.pop();t=this._latlngs,t.length=2&&t[0].equals(t[t.length-1])&&t.pop()},projectLatlngsfunction(){if(o.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var t,e,i,n;for(t=0,i=this._holes.length;it;t++)for(this._holePoints[t]=[],e=0,n=this._holes[t].length;ne;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])}},_clipPointsfunction(){var t=this._originalPoints,e=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var i=0,n=this._parts.length;ni;i++){var s=o.PolyUtil.clipPolygon(this._parts[i],this._map._pathViewport);s.length&&e.push(s)}this._parts=e}},_getPathPartStrfunction(t){var e=o.Polyline.prototype._getPathPartStr.call(this,t);return e+(o.Browser.svgzx)}}),o.polygon=function(t,e){return new o.Polygon(t,e)},function(){function t(t){return o.FeatureGroup.extend({initializefunction(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngsfunction(e){var i=0,n=e.length;for(this.eachLayer(function(t){nit.setLatLngs(e[i++])this.removeLayer(t)},this);ni;)this.addLayer(new t(e[i++],this._options));return this},getLatLngsfunction(){var t=[];return this.eachLayer(function(e){t.push(e.getLatLngs())}),t}})}o.MultiPolyline=t(o.Polyline),o.MultiPolygon=t(o.Polygon),o.multiPolyline=function(t,e){return new o.MultiPolyline(t,e)},o.multiPolygon=function(t,e){return new o.MultiPolygon(t,e)}}(),o.Rectangle=o.Polygon.extend({initializefunction(t,e){o.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBoundsfunction(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngsfunction(t){return t=o.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),o.rectangle=function(t,e){return new o.Rectangle(t,e)},o.Circle=o.Path.extend({initializefunction(t,e,i){o.Path.prototype.initialize.call(this,i),this._latlng=o.latLng(t),this._mRadius=e},options{fill!0},setLatLngfunction(t){return this._latlng=o.latLng(t),this.redraw()},setRadiusfunction(t){return this._mRadius=t,this.redraw()},projectLatlngsfunction(){var t=this._getLngRadius(),e=this._latlng,i=this._map.latLngToLayerPoint([e.lat,e.lng-t]);this._point=this._map.latLngToLayerPoint(e),this._radius=Math.max(this._point.x-i.x,1)},getBoundsfunction(){var t=this._getLngRadius(),e=360(this._mRadius40075017),i=this._latlng;return new o.LatLngBounds([i.lat-e,i.lng-t],[i.lat+e,i.lng+t])},getLatLngfunction(){return this._latlng},getPathStringfunction(){var t=this._point,e=this._radius;return this._checkIfEmpty()o.Browser.svgM+t.x+,+(t.y-e)+A+e+,+e+,0,1,1,+(t.x-.1)+,+(t.y-e)+ z(t._round(),e=Math.round(e),AL +t.x+,+t.y+ +e+,+e+ 0,+23592600)},getRadiusfunction(){return this._mRadius},_getLatRadiusfunction(){return 360(this._mRadius40075017)},_getLngRadiusfunction(){return this._getLatRadius()Math.cos(o.LatLng.DEG_TO_RADthis._latlng.lat)},_checkIfEmptyfunction(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,i=this._point;return i.x-et.max.xi.y-et.max.yi.x+et.min.xi.y+et.min.y}}),o.circle=function(t,e,i){return new o.Circle(t,e,i)},o.CircleMarker=o.Circle.extend({options{radius10,weight2},initializefunction(t,e){o.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngsfunction(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStylefunction(){o.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setRadiusfunction(t){return this.options.radius=this._radius=t,this.redraw()}}),o.circleMarker=function(t,e){return new o.CircleMarker(t,e)},o.Polyline.include(o.Path.CANVAS{_containsPointfunction(t,e){var i,n,s,a,r,h,l,u=this.options.weight2;for(o.Browser.touch&&(u+=10),i=0,a=this._parts.length;ai;i++)for(l=this._parts[i],n=0,r=l.length,s=r-1;rn;s=n++)if((e0!==n)&&(h=o.LineUtil.pointToSegmentDistance(t,l[s],l[n]),u=h))return!0;return!1}}{}),o.Polygon.include(o.Path.CANVAS{_containsPointfunction(t){var e,i,n,s,a,r,h,l,u=!1;if(o.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(s=0,h=this._parts.length;hs;s++)for(e=this._parts[s],a=0,l=e.length,r=l-1;la;r=a++)i=e[a],n=e[r],i.yt.y!=n.yt.y&&t.x(n.x-i.x)(t.y-i.y)(n.y-i.y)+i.x&&(u=!u);return u}}{}),o.Circle.include(o.Path.CANVAS{_drawPathfunction(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2Math.PI,!1)},_containsPointfunction(t){var e=this._point,i=this.options.strokethis.options.weight20;return t.distanceTo(e)=this._radius+i}}{}),o.CircleMarker.include(o.Path.CANVAS{_updateStylefunction(){o.Path.prototype._updateStyle.call(this)}}{}),o.GeoJSON=o.FeatureGroup.extend({initializefunction(t,e){o.setOptions(this,e),this._layers={},t&&this.addData(t)},addDatafunction(t){var e,i,n,s=o.Util.isArray(t)tt.features;if(s){for(e=0,i=s.length;ie;e++)n=s[e],(n.geometriesn.geometryn.featuresn.coordinates)&&this.addData(s[e]);return this}var a=this.options;if(!a.filtera.filter(t)){var r=o.GeoJSON.geometryToLayer(t,a.pointToLayer,a.coordsToLatLng);return r.feature=o.GeoJSON.asFeature(t),r.defaultOptions=r.options,this.resetStyle(r),a.onEachFeature&&a.onEachFeature(t,r),this.addLayer(r)}},resetStylefunction(t){var e=this.options.style;e&&(o.Util.extend(t.options,t.defaultOptions),this._setLayerStyle(t,e))},setStylefunction(t){this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStylefunction(t,e){function==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),o.extend(o.GeoJSON,{geometryToLayerfunction(t,e,i){var n,s,a,r,h,l=Feature===t.typet.geometryt,u=l.coordinates,c=[];switch(i=ithis.coordsToLatLng,l.type){casePointreturn n=i(u),ee(t,n)new o.Marker(n);caseMultiPointfor(a=0,r=u.length;ra;a++)n=i(u[a]),h=ee(t,n)new o.Marker(n),c.push(h);return new o.FeatureGroup(c);caseLineStringreturn s=this.coordsToLatLngs(u,0,i),new o.Polyline(s);casePolygonreturn s=this.coordsToLatLngs(u,1,i),new o.Polygon(s);caseMultiLineStringreturn s=this.coordsToLatLngs(u,1,i),new o.MultiPolyline(s);caseMultiPolygonreturn s=this.coordsToLatLngs(u,2,i),new o.MultiPolygon(s);caseGeometryCollectionfor(a=0,r=l.geometries.length;ra;a++)h=this.geometryToLayer({geometryl.geometries[a],typeFeature,propertiest.properties},e,i),c.push(h);return new o.FeatureGroup(c);defaultthrow new Error(Invalid GeoJSON object.)}},coordsToLatLngfunction(t){return new o.LatLng(t[1],t[0])},coordsToLatLngsfunction(t,e,i){var n,o,s,a=[];for(o=0,s=t.length;so;o++)n=ethis.coordsToLatLngs(t[o],e-1,i)(ithis.coordsToLatLng)(t[o]),a.push(n);return a},latLngToCoordsfunction(t){return[t.lng,t.lat]},latLngsToCoordsfunction(t){for(var e=[],i=0,n=t.length;ni;i++)e.push(o.GeoJSON.latLngToCoords(t[i]));return e},getFeaturefunction(t,e){return t.featureo.extend({},t.feature,{geometrye})o.GeoJSON.asFeature(e)},asFeaturefunction(t){returnFeature===t.typet{typeFeature,properties{},geometryt}}});var a={toGeoJSONfunction(){return o.GeoJSON.getFeature(this,{typePoint,coordinateso.GeoJSON.latLngToCoords(this.getLatLng())})}};o.Marker.include(a),o.Circle.include(a),o.CircleMarker.include(a),o.Polyline.include({toGeoJSONfunction(){return o.GeoJSON.getFeature(this,{typeLineString,coordinateso.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),o.Polygon.include({toGeoJSONfunction(){var t,e,i,n=[o.GeoJSON.latLngsToCoords(this.getLatLngs())];if(n[0].push(n[0][0]),this._holes)for(t=0,e=this._holes.length;et;t++)i=o.GeoJSON.latLngsToCoords(this._holes[t]),i.push(i[0]),n.push(i);return o.GeoJSON.getFeature(this,{typePolygon,coordinatesn})}}),function(){function t(t,e){t.include({toGeoJSONfunction(){var t=[];return this.eachLayer(function(e){t.push(e.toGeoJSON().geometry.coordinates)}),o.GeoJSON.getFeature(this,{typee,coordinatest})}})}t(o.MultiPolyline,MultiLineString),t(o.MultiPolygon,MultiPolygon)}(),o.LayerGroup.include({toGeoJSONfunction(){var t=[];return this.eachLayer(function(e){e.toGeoJSON&&t.push(o.GeoJSON.asFeature(e.toGeoJSON()))}),{typeFeatureCollection,featurest}}}),o.geoJson=function(t,e){return new o.GeoJSON(t,e)},o.DomEvent={addListenerfunction(t,e,i,n){var s,a,r,h=o.stamp(i),l=_leaflet_+e+h;return t[l]this(s=function(e){return i.call(nt,eo.DomEvent._getEvent())},o.Browser.msTouch&&0===e.indexOf(touch)this.addMsTouchListener(t,e,s,h)(o.Browser.touch&&dblclick===e&&this.addDoubleTapListener&&this.addDoubleTapListener(t,s,h),addEventListenerin tmousewheel===e(t.addEventListener(DOMMouseScroll,s,!1),t.addEventListener(e,s,!1))mouseenter===emouseleave===e(a=s,r=mouseenter===emouseovermouseout,s=function(e){return o.DomEvent._checkMouse(t,e)a(e)void 0},t.addEventListener(r,s,!1))click===e&&o.Browser.android(a=s,s=function(t){return o.DomEvent._filterClick(t,a)},t.addEventListener(e,s,!1))t.addEventListener(e,s,!1)attachEventin t&&t.attachEvent(on+e,s),t[l]=s,this))},removeListenerfunction(t,e,i){var n=o.stamp(i),s=_leaflet_+e+n,a=t[s];return a(o.Browser.msTouch&&0===e.indexOf(touch)this.removeMsTouchListener(t,e,n)o.Browser.touch&&dblclick===e&&this.removeDoubleTapListenerthis.removeDoubleTapListener(t,n)removeEventListenerin tmousewheel===e(t.removeEventListener(DOMMouseScroll,a,!1),t.removeEventListener(e,a,!1))mouseenter===emouseleave===et.removeEventListener(mouseenter===emouseovermouseout,a,!1)t.removeEventListener(e,a,!1)detachEventin t&&t.detachEvent(on+e,a),t[s]=null,this)this},stopPropagationfunction(t){return t.stopPropagationt.stopPropagation()t.cancelBubble=!0,this},disableClickPropagationfunction(t){for(var e=o.DomEvent.stopPropagation,i=o.Draggable.START.length-1;i=0;i--)o.DomEvent.addListener(t,o.Draggable.START[i],e);return o.DomEvent.addListener(t,click,o.DomEvent._fakeStop).addListener(t,dblclick,e)},preventDefaultfunction(t){return t.preventDefaultt.preventDefault()t.returnValue=!1,this},stopfunction(t){return o.DomEvent.preventDefault(t).stopPropagation(t)},getMousePositionfunction(t,i){var n=o.Browser.ie7,s=e.body,a=e.documentElement,r=t.pageXt.pageX-s.scrollLeft-a.scrollLeftt.clientX,h=t.pageYt.pageY-s.scrollTop-a.scrollTopt.clientY,l=new o.Point(r,h),u=i.getBoundingClientRect(),c=u.left-i.clientLeft,d=u.top-i.clientTop;return o.DomUtil.documentIsLtr()!o.Browser.webkit&&!n(c+=i.scrollWidth-i.clientWidth,n&&hidden!==o.DomUtil.getStyle(i,overflow-y)&&hidden!==o.DomUtil.getStyle(i,overflow)&&(c+=17)),l._subtract(new o.Point(c,d))},getWheelDeltafunction(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta120),t.detail&&(e=-t.detail3),e},_skipEvents{},_fakeStopfunction(t){o.DomEvent._skipEvents[t.type]=!0},_skippedfunction(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_checkMousefunction(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(n){return!1}return i!==t},_getEventfunction(){var e=t.event;if(!e)for(var i=arguments.callee.caller;i&&(e=i.arguments[0],!et.Event!==e.constructor);)i=i.caller;return e},_filterClickfunction(t,e){var i=t.timeStampt.originalEvent.timeStamp,n=o.DomEvent._lastClick&&i-o.DomEvent._lastClick;return n&&n100&&1e3nt.target._simulatedClick&&!t._simulated(o.DomEvent.stop(t),void 0)(o.DomEvent._lastClick=i,e(t))}},o.DomEvent.on=o.DomEvent.addListener,o.DomEvent.off=o.DomEvent.removeListener,o.Draggable=o.Class.extend({includeso.Mixin.Events,statics{STARTo.Browser.touch[touchstart,mousedown][mousedown],END{mousedownmouseup,touchstarttouchend,MSPointerDowntouchend},MOVE{mousedownmousemove,touchstarttouchmove,MSPointerDowntouchmove}},initializefunction(t,e){this._element=t,this._dragStartTarget=et},enablefunction(){if(!this._enabled){for(var t=o.Draggable.START.length-1;t=0;t--)o.DomEvent.on(this._dragStartTarget,o.Draggable.START[t],this._onDown,this);this._enabled=!0}},disablefunction(){if(this._enabled){for(var t=o.Draggable.START.length-1;t=0;t--)o.DomEvent.off(this._dragStartTarget,o.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDownfunction(t){if(!t.shiftKey&&(1===t.which1===t.buttont.touches)&&(o.DomEvent.stopPropagation(t),!o.Draggable._disabled)){o.DomUtil.disableImageDrag(),o.DomUtil.disableTextSelection();var i=t.touchest.touches[0]t,n=i.target;o.Browser.touch&&a===n.tagName.toLowerCase()&&o.DomUtil.addClass(n,leaflet-active),this._moved=!1,this._moving(this._startPoint=new o.Point(i.clientX,i.clientY),this._startPos=this._newPos=o.DomUtil.getPosition(this._element),o.DomEvent.on(e,o.Draggable.MOVE[t.type],this._onMove,this).on(e,o.Draggable.END[t.type],this._onUp,this))}},_onMovefunction(t){if(!(t.touches&&t.touches.length1)){var i=t.touches&&1===t.touches.lengtht.touches[0]t,n=new o.Point(i.clientX,i.clientY),s=n.subtract(this._startPoint);(s.xs.y)&&(o.DomEvent.preventDefault(t),this._moved(this.fire(dragstart),this._moved=!0,this._startPos=o.DomUtil.getPosition(this._element).subtract(s),o.Browser.toucho.DomUtil.addClass(e.body,leaflet-dragging)),this._newPos=this._startPos.add(s),this._moving=!0,o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))}},_updatePositionfunction(){this.fire(predrag),o.DomUtil.setPosition(this._element,this._newPos),this.fire(drag)},_onUpfunction(){o.Browser.toucho.DomUtil.removeClass(e.body,leaflet-dragging);for(var t in o.Draggable.MOVE)o.DomEvent.off(e,o.Draggable.MOVE[t],this._onMove).off(e,o.Draggable.END[t],this._onUp);o.DomUtil.enableImageDrag(),o.DomUtil.enableTextSelection(),this._moved&&(o.Util.cancelAnimFrame(this._animRequest),this.fire(dragend)),this._moving=!1}}),o.Handler=o.Class.extend({initializefunction(t){this._map=t},enablefunction(){this._enabled(this._enabled=!0,this.addHooks())},disablefunction(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabledfunction(){return!!this._enabled}}),o.Map.mergeOptions({dragging!0,inertia!o.Browser.android23,inertiaDeceleration3400,inertiaMaxSpeed10,inertiaThresholdo.Browser.touch3218,easeLinearity.25,worldCopyJump!1}),o.Map.Drag=o.Handler.extend({addHooksfunction(){if(!this._draggable){var t=this._map;this._draggable=new o.Draggable(t._mapPane,t._container),this._draggable.on({dragstartthis._onDragStart,dragthis._onDrag,dragendthis._onDragEnd},this),t.options.worldCopyJump&&(this._draggable.on(predrag,this._onPreDrag,this),t.on(viewreset,this._onViewReset,this),this._onViewReset())}this._draggable.enable()},removeHooksfunction(){this._draggable.disable()},movedfunction(){return this._draggable&&this._draggable._moved},_onDragStartfunction(){var t=this._map;t._panAnim&&t._panAnim.stop(),t.fire(movestart).fire(dragstart),t.options.inertia&&(this._positions=[],this._times=[])},_onDragfunction(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),t-this._times[0]200&&(this._positions.shift(),this._times.shift())}this._map.fire(move).fire(drag)},_onViewResetfunction(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project([0,180]).x},_onPreDragfunction(){var t=this._worldWidth,e=Math.round(t2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,s=(n+e+i)%t-e-i,a=Math.abs(o+i)Math.abs(s+i)os;this._draggable._newPos.x=a},_onDragEndfunction(){var t=this._map,e=t.options,i=+new Date-this._lastTime,n=!e.inertiaie.inertiaThreshold!this._positions[0];if(t.fire(dragend),n)t.fire(moveend);else{var s=this._lastPos.subtract(this._positions[0]),a=(this._lastTime+i-this._times[0])1e3,r=e.easeLinearity,h=s.multiplyBy(ra),l=h.distanceTo([0,0]),u=Math.min(e.inertiaMaxSpeed,l),c=h.multiplyBy(ul),d=u(e.inertiaDecelerationr),p=c.multiplyBy(-d2).round();p.x&&p.yo.Util.requestAnimFrame(function(){t.panBy(p,{durationd,easeLinearityr,noMoveStart!0})})t.fire(moveend)}}}),o.Map.addInitHook(addHandler,dragging,o.Map.Drag),o.Map.mergeOptions({doubleClickZoom!0}),o.Map.DoubleClickZoom=o.Handler.extend({addHooksfunction(){this._map.on(dblclick,this._onDoubleClick)},removeHooksfunction(){this._map.off(dblclick,this._onDoubleClick)},_onDoubleClickfunction(t){this.setZoomAround(t.containerPoint,this._zoom+1)}}),o.Map.addInitHook(addHandler,doubleClickZoom,o.Map.DoubleClickZoom),o.Map.mergeOptions({scrollWheelZoom!0}),o.Map.ScrollWheelZoom=o.Handler.extend({addHooksfunction(){o.DomEvent.on(this._map._container,mousewheel,this._onWheelScroll,this),o.DomEvent.on(this._map._container,MozMousePixelScroll,o.DomEvent.preventDefault),this._delta=0},removeHooksfunction(){o.DomEvent.off(this._map._container,mousewheel,this._onWheelScroll),o.DomEvent.off(this._map._container,MozMousePixelScroll,o.DomEvent.preventDefault)},_onWheelScrollfunction(t){var e=o.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime(this._startTime=+new Date);var i=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o.bind(this._performZoom,this),i),o.DomEvent.preventDefault(t),o.DomEvent.stopPropagation(t)},_performZoomfunction(){var t=this._map,e=this._delta,i=t.getZoom();e=e0Math.ceil(e)Math.floor(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(i+e)-i,this._delta=0,this._startTime=null,e&&t.setZoomAround(this._lastMousePos,i+e)}}),o.Map.addInitHook(addHandler,scrollWheelZoom,o.Map.ScrollWheelZoom),o.extend(o.DomEvent,{_touchstarto.Browser.msTouchMSPointerDowntouchstart,_touchendo.Browser.msTouchMSPointerUptouchend,addDoubleTapListenerfunction(t,i,n){function s(t){var e;if(o.Browser.msTouch(_.push(t.pointerId),e=_.length)e=t.touches.length,!(e1)){var i=Date.now(),n=i-(ri);h=t.touchest.touches[0]t,l=n0&&u=n,r=i}}function a(t){if(o.Browser.msTouch){var e=_.indexOf(t.pointerId);if(-1===e)return;_.splice(e,1)}if(l){if(o.Browser.msTouch){var n,s={};for(var a in h)n=h[a],s[a]=function==typeof nn.bind(h)n;h=s}h.type=dblclick,i(h),r=null}}var r,h,l=!1,u=250,c=_leaflet_,d=this._touchstart,p=this._touchend,_=[];t[c+d+n]=s,t[c+p+n]=a;var m=o.Browser.msTouche.documentElementt;return t.addEventListener(d,s,!1),m.addEventListener(p,a,!1),o.Browser.msTouch&&m.addEventListener(MSPointerCancel,a,!1),this},removeDoubleTapListenerfunction(t,i){var n=_leaflet_;return t.removeEventListener(this._touchstart,t[n+this._touchstart+i],!1),(o.Browser.msTouche.documentElementt).removeEventListener(this._touchend,t[n+this._touchend+i],!1),o.Browser.msTouch&&e.documentElement.removeEventListener(MSPointerCancel,t[n+this._touchend+i],!1),this}}),o.extend(o.DomEvent,{_msTouches[],_msDocumentListener!1,addMsTouchListenerfunction(t,e,i,n){switch(e){casetouchstartreturn this.addMsTouchListenerStart(t,e,i,n);casetouchendreturn this.addMsTouchListenerEnd(t,e,i,n);casetouchmovereturn this.addMsTouchListenerMove(t,e,i,n);defaultthrowUnknown touch event type}},addMsTouchListenerStartfunction(t,i,n,o){var s=_leaflet_,a=this._msTouches,r=function(t){for(var e=!1,i=0;ia.length;i++)if(a[i].pointerId===t.pointerId){e=!0;break}ea.push(t),t.touches=a.slice(),t.changedTouches=[t],n(t)};if(t[s+touchstart+o]=r,t.addEventListener(MSPointerDown,r,!1),!this._msDocumentListener){var h=function(t){for(var e=0;ea.length;e++)if(a[e].pointerId===t.pointerId){a.splice(e,1);break}};e.documentElement.addEventListener(MSPointerUp,h,!1),e.documentElement.addEventListener(MSPointerCancel,h,!1),this._msDocumentListener=!0}return this},addMsTouchListenerMovefunction(t,e,i,n){function o(t){if(t.pointerType!==t.MSPOINTER_TYPE_MOUSE0!==t.buttons){for(var e=0;ea.length;e++)if(a[e].pointerId===t.pointerId){a[e]=t;break}t.touches=a.slice(),t.changedTouches=[t],i(t)}}var s=_leaflet_,a=this._msTouches;return t[s+touchmove+n]=o,t.addEventListener(MSPointerMove,o,!1),this},addMsTouchListenerEndfunction(t,e,i,n){var o=_leaflet_,s=this._msTouches,a=function(t){for(var e=0;es.length;e++)if(s[e].pointerId===t.pointerId){s.splice(e,1);break}t.touches=s.slice(),t.changedTouches=[t],i(t)};return t[o+touchend+n]=a,t.addEventListener(MSPointerUp,a,!1),t.addEventListener(MSPointerCancel,a,!1),this},removeMsTouchListenerfunction(t,e,i){var n=_leaflet_,o=t[n+e+i];switch(e){casetouchstartt.removeEventListener(MSPointerDown,o,!1);break;casetouchmovet.removeEventListener(MSPointerMove,o,!1);break;casetouchendt.removeEventListener(MSPointerUp,o,!1),t.removeEventListener(MSPointerCancel,o,!1)}return this}}),o.Map.mergeOptions({touchZoomo.Browser.touch&&!o.Browser.android23}),o.Map.TouchZoom=o.Handler.extend({addHooksfunction(){o.DomEvent.on(this._map._container,touchstart,this._onTouchStart,this)},removeHooksfunction(){o.DomEvent.off(this._map._container,touchstart,this._onTouchStart,this)},_onTouchStartfunction(t){var i=this._map;if(t.touches&&2===t.touches.length&&!i._animatingZoom&&!this._zooming){var n=i.mouseEventToLayerPoint(t.touches[0]),s=i.mouseEventToLayerPoint(t.touches[1]),a=i._getCenterLayerPoint();this._startCenter=n.add(s)._divideBy(2),this._startDist=n.distanceTo(s),this._moved=!1,this._zooming=!0,this._centerOffset=a.subtract(this._startCenter),i._panAnim&&i._panAnim.stop(),o.DomEvent.on(e,touchmove,this._onTouchMove,this).on(e,touchend,this._onTouchEnd,this),o.DomEvent.preventDefault(t)}},_onTouchMovefunction(t){var e=this._map;if(t.touches&&2===t.touches.length&&this._zooming){var i=e.mouseEventToLayerPoint(t.touches[0]),n=e.mouseEventToLayerPoint(t.touches[1]);this._scale=i.distanceTo(n)this._startDist,this._delta=i._add(n)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(this._moved(o.DomUtil.addClass(e._mapPane,leaflet-touching),e.fire(movestart).fire(zoomstart),this._moved=!0),o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),o.DomEvent.preventDefault(t))}},_updateOnMovefunction(){var t=this._map,e=this._getScaleOrigin(),i=t.layerPointToLatLng(e),n=t.getScaleZoom(this._scale);t._animateZoom(i,n,this._startCenter,this._scale,this._delta)},_onTouchEndfunction(){if(!this._moved!this._zooming)return this._zooming=!1,void 0;var t=this._map;this._zooming=!1,o.DomUtil.removeClass(t._mapPane,leaflet-touching),o.Util.cancelAnimFrame(this._animRequest),o.DomEvent.off(e,touchmove,this._onTouchMove).off(e,touchend,this._onTouchEnd);var i=this._getScaleOrigin(),n=t.layerPointToLatLng(i),s=t.getZoom(),a=t.getScaleZoom(this._scale)-s,r=a0Math.ceil(a)Math.floor(a),h=t._limitZoom(s+r),l=t.getZoomScale(h)this._scale;t._animateZoom(n,h,i,l)},_getScaleOriginfunction(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),o.Map.addInitHook(addHandler,touchZoom,o.Map.TouchZoom),o.Map.mergeOptions({tap!0,tapTolerance15}),o.Map.Tap=o.Handler.extend({addHooksfunction(){o.DomEvent.on(this._map._container,touchstart,this._onDown,this)
},removeHooksfunction(){o.DomEvent.off(this._map._container,touchstart,this._onDown,this)},_onDownfunction(t){if(t.touches){if(o.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length1)return this._fireClick=!1,clearTimeout(this._holdTimeout),void 0;var i=t.touches[0],n=i.target;this._startPos=this._newPos=new o.Point(i.clientX,i.clientY),a===n.tagName.toLowerCase()&&o.DomUtil.addClass(n,leaflet-active),this._holdTimeout=setTimeout(o.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent(contextmenu,i))},this),1e3),o.DomEvent.on(e,touchmove,this._onMove,this).on(e,touchend,this._onUp,this)}},_onUpfunction(t){if(clearTimeout(this._holdTimeout),o.DomEvent.off(e,touchmove,this._onMove,this).off(e,touchend,this._onUp,this),this._fireClick&&t&&t.changedTouches){var i=t.changedTouches[0],n=i.target;a===n.tagName.toLowerCase()&&o.DomUtil.removeClass(n,leaflet-active),this._isTapValid()&&this._simulateEvent(click,i)}},_isTapValidfunction(){return this._newPos.distanceTo(this._startPos)=this._map.options.tapTolerance},_onMovefunction(t){var e=t.touches[0];this._newPos=new o.Point(e.clientX,e.clientY)},_simulateEventfunction(i,n){var o=e.createEvent(MouseEvents);o._simulated=!0,n.target._simulatedClick=!0,o.initMouseEvent(i,!0,!0,t,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(o)}}),o.Browser.touch&&!o.Browser.msTouch&&o.Map.addInitHook(addHandler,tap,o.Map.Tap),o.Map.mergeOptions({boxZoom!0}),o.Map.BoxZoom=o.Handler.extend({initializefunction(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooksfunction(){o.DomEvent.on(this._container,mousedown,this._onMouseDown,this)},removeHooksfunction(){o.DomEvent.off(this._container,mousedown,this._onMouseDown)},_onMouseDownfunction(t){return!t.shiftKey1!==t.which&&1!==t.button!1(o.DomUtil.disableTextSelection(),o.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),this._box=o.DomUtil.create(div,leaflet-zoom-box,this._pane),o.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor=crosshair,o.DomEvent.on(e,mousemove,this._onMouseMove,this).on(e,mouseup,this._onMouseUp,this).on(e,keydown,this._onKeyDown,this),this._map.fire(boxzoomstart),void 0)},_onMouseMovefunction(t){var e=this._startLayerPoint,i=this._box,n=this._map.mouseEventToLayerPoint(t),s=n.subtract(e),a=new o.Point(Math.min(n.x,e.x),Math.min(n.y,e.y));o.DomUtil.setPosition(i,a),i.style.width=Math.max(0,Math.abs(s.x)-4)+px,i.style.height=Math.max(0,Math.abs(s.y)-4)+px},_finishfunction(){this._pane.removeChild(this._box),this._container.style.cursor=,o.DomUtil.enableTextSelection(),o.DomUtil.enableImageDrag(),o.DomEvent.off(e,mousemove,this._onMouseMove).off(e,mouseup,this._onMouseUp).off(e,keydown,this._onKeyDown)},_onMouseUpfunction(t){this._finish();var e=this._map,i=e.mouseEventToLayerPoint(t);if(!this._startLayerPoint.equals(i)){var n=new o.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint),e.layerPointToLatLng(i));e.fitBounds(n),e.fire(boxzoomend,{boxZoomBoundsn})}},_onKeyDownfunction(t){27===t.keyCode&&this._finish()}}),o.Map.addInitHook(addHandler,boxZoom,o.Map.BoxZoom),o.Map.mergeOptions({keyboard!0,keyboardPanOffset80,keyboardZoomOffset1}),o.Map.Keyboard=o.Handler.extend({keyCodes{left[37],right[39],down[40],up[38],zoomIn[187,107,61],zoomOut[189,109,173]},initializefunction(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooksfunction(){var t=this._map._container;-1===t.tabIndex&&(t.tabIndex=0),o.DomEvent.on(t,focus,this._onFocus,this).on(t,blur,this._onBlur,this).on(t,mousedown,this._onMouseDown,this),this._map.on(focus,this._addHooks,this).on(blur,this._removeHooks,this)},removeHooksfunction(){this._removeHooks();var t=this._map._container;o.DomEvent.off(t,focus,this._onFocus,this).off(t,blur,this._onBlur,this).off(t,mousedown,this._onMouseDown,this),this._map.off(focus,this._addHooks,this).off(blur,this._removeHooks,this)},_onMouseDownfunction(){if(!this._focused){var i=e.body,n=e.documentElement,o=i.scrollTopn.scrollTop,s=i.scrollLeftn.scrollLeft;this._map._container.focus(),t.scrollTo(s,o)}},_onFocusfunction(){this._focused=!0,this._map.fire(focus)},_onBlurfunction(){this._focused=!1,this._map.fire(blur)},_setPanOffsetfunction(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;ie;e++)n[o.left[e]]=[-1t,0];for(e=0,i=o.right.length;ie;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;ie;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;ie;e++)n[o.up[e]]=[0,-1t]},_setZoomOffsetfunction(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;ie;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;ie;e++)n[o.zoomOut[e]]=-t},_addHooksfunction(){o.DomEvent.on(e,keydown,this._onKeyDown,this)},_removeHooksfunction(){o.DomEvent.off(e,keydown,this._onKeyDown,this)},_onKeyDownfunction(t){var e=t.keyCode,i=this._map;if(e in this._panKeys){if(i._panAnim&&i._panAnim._inProgress)return;i.panBy(this._panKeys[e]),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds)}else{if(!(e in this._zoomKeys))return;i.setZoom(i.getZoom()+this._zoomKeys[e])}o.DomEvent.stop(t)}}),o.Map.addInitHook(addHandler,keyboard,o.Map.Keyboard),o.Handler.MarkerDrag=o.Handler.extend({initializefunction(t){this._marker=t},addHooksfunction(){var t=this._marker._icon;this._draggable(this._draggable=new o.Draggable(t,t)),this._draggable.on(dragstart,this._onDragStart,this).on(drag,this._onDrag,this).on(dragend,this._onDragEnd,this),this._draggable.enable()},removeHooksfunction(){this._draggable.off(dragstart,this._onDragStart,this).off(drag,this._onDrag,this).off(dragend,this._onDragEnd,this),this._draggable.disable()},movedfunction(){return this._draggable&&this._draggable._moved},_onDragStartfunction(){this._marker.closePopup().fire(movestart).fire(dragstart)},_onDragfunction(){var t=this._marker,e=t._shadow,i=o.DomUtil.getPosition(t._icon),n=t._map.layerPointToLatLng(i);e&&o.DomUtil.setPosition(e,i),t._latlng=n,t.fire(move,{latlngn}).fire(drag)},_onDragEndfunction(){this._marker.fire(moveend).fire(dragend)}}),o.Control=o.Class.extend({options{positiontopright},initializefunction(t){o.setOptions(this,t)},getPositionfunction(){return this.options.position},setPositionfunction(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainerfunction(){return this._container},addTofunction(t){this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return o.DomUtil.addClass(e,leaflet-control),-1!==i.indexOf(bottom)n.insertBefore(e,n.firstChild)n.appendChild(e),this},removeFromfunction(t){var e=this.getPosition(),i=t._controlCorners[e];return i.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this}}),o.control=function(t){return new o.Control(t)},o.Map.include({addControlfunction(t){return t.addTo(this),this},removeControlfunction(t){return t.removeFrom(this),this},_initControlPosfunction(){function t(t,s){var a=i+t+ +i+s;e[t+s]=o.DomUtil.create(div,a,n)}var e=this._controlCorners={},i=leaflet-,n=this._controlContainer=o.DomUtil.create(div,i+control-container,this._container);t(top,left),t(top,right),t(bottom,left),t(bottom,right)},_clearControlPosfunction(){this._container.removeChild(this._controlContainer)}}),o.Control.Zoom=o.Control.extend({options{positiontopleft},onAddfunction(t){var e=leaflet-control-zoom,i=o.DomUtil.create(div,e+ leaflet-bar);return this._map=t,this._zoomInButton=this._createButton(+,Zoom in,e+-in,i,this._zoomIn,this),this._zoomOutButton=this._createButton(-,Zoom out,e+-out,i,this._zoomOut,this),t.on(zoomend zoomlevelschange,this._updateDisabled,this),i},onRemovefunction(t){t.off(zoomend zoomlevelschange,this._updateDisabled,this)},_zoomInfunction(t){this._map.zoomIn(t.shiftKey31)},_zoomOutfunction(t){this._map.zoomOut(t.shiftKey31)},_createButtonfunction(t,e,i,n,s,a){var r=o.DomUtil.create(a,i,n);r.innerHTML=t,r.href=#,r.title=e;var h=o.DomEvent.stopPropagation;return o.DomEvent.on(r,click,h).on(r,mousedown,h).on(r,dblclick,h).on(r,click,o.DomEvent.preventDefault).on(r,click,s,a),r},_updateDisabledfunction(){var t=this._map,e=leaflet-disabled;o.DomUtil.removeClass(this._zoomInButton,e),o.DomUtil.removeClass(this._zoomOutButton,e),t._zoom===t.getMinZoom()&&o.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&o.DomUtil.addClass(this._zoomInButton,e)}}),o.Map.mergeOptions({zoomControl!0}),o.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new o.Control.Zoom,this.addControl(this.zoomControl))}),o.control.zoom=function(t){return new o.Control.Zoom(t)},o.Control.Attribution=o.Control.extend({options{positionbottomright,prefix'a href=httpleafletjs.com title=A JS library for interactive mapsLeafleta'},initializefunction(t){o.setOptions(this,t),this._attributions={}},onAddfunction(t){return this._container=o.DomUtil.create(div,leaflet-control-attribution),o.DomEvent.disableClickPropagation(this._container),t.on(layeradd,this._onLayerAdd,this).on(layerremove,this._onLayerRemove,this),this._update(),this._container},onRemovefunction(t){t.off(layeradd,this._onLayerAdd).off(layerremove,this._onLayerRemove)},setPrefixfunction(t){return this.options.prefix=t,this._update(),this},addAttributionfunction(t){return t(this._attributions[t](this._attributions[t]=0),this._attributions[t]++,this._update(),this)void 0},removeAttributionfunction(t){return t(this._attributions[t]&&(this._attributions[t]--,this._update()),this)void 0},_updatefunction(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(, )),this._container.innerHTML=i.join(  )}},_onLayerAddfunction(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemovefunction(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),o.Map.mergeOptions({attributionControl!0}),o.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new o.Control.Attribution).addTo(this))}),o.control.attribution=function(t){return new o.Control.Attribution(t)},o.Control.Scale=o.Control.extend({options{positionbottomleft,maxWidth100,metric!0,imperial!0,updateWhenIdle!1},onAddfunction(t){this._map=t;var e=leaflet-control-scale,i=o.DomUtil.create(div,e),n=this.options;return this._addScales(n,e,i),t.on(n.updateWhenIdlemoveendmove,this._update,this),t.whenReady(this._update,this),i},onRemovefunction(t){t.off(this.options.updateWhenIdlemoveendmove,this._update,this)},_addScalesfunction(t,e,i){t.metric&&(this._mScale=o.DomUtil.create(div,e+-line,i)),t.imperial&&(this._iScale=o.DomUtil.create(div,e+-line,i))},_updatefunction(){var t=this._map.getBounds(),e=t.getCenter().lat,i=6378137Math.PIMath.cos(eMath.PI180),n=i(t.getNorthEast().lng-t.getSouthWest().lng)180,o=this._map.getSize(),s=this.options,a=0;o.x0&&(a=n(s.maxWidtho.x)),this._updateScales(s,a)},_updateScalesfunction(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetricfunction(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(et)+px,this._mScale.innerHTML=1e3ee+ me1e3+ km},_updateImperialfunction(t){var e,i,n,o=3.2808399t,s=this._iScale;o5280(e=o5280,i=this._getRoundNum(e),s.style.width=this._getScaleWidth(ie)+px,s.innerHTML=i+ mi)(n=this._getRoundNum(o),s.style.width=this._getScaleWidth(no)+px,s.innerHTML=n+ ft)},_getScaleWidthfunction(t){return Math.round(this.options.maxWidtht)-10},_getRoundNumfunction(t){var e=Math.pow(10,(Math.floor(t)+).length-1),i=te;return i=i=1010i=55i=33i=221,ei}}),o.control.scale=function(t){return new o.Control.Scale(t)},o.Control.Layers=o.Control.extend({options{collapsed!0,positiontopright,autoZIndex!0},initializefunction(t,e,i){o.setOptions(this,i),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var n in t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAddfunction(t){return this._initLayout(),this._update(),t.on(layeradd,this._onLayerChange,this).on(layerremove,this._onLayerChange,this),this._container},onRemovefunction(t){t.off(layeradd,this._onLayerChange).off(layerremove,this._onLayerChange)},addBaseLayerfunction(t,e){return this._addLayer(t,e),this._update(),this},addOverlayfunction(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayerfunction(t){var e=o.stamp(t);return delete this._layers[e],this._update(),this},_initLayoutfunction(){var t=leaflet-control-layers,e=this._container=o.DomUtil.create(div,t);e.setAttribute(aria-haspopup,!0),o.Browser.toucho.DomEvent.on(e,click,o.DomEvent.stopPropagation)(o.DomEvent.disableClickPropagation(e),o.DomEvent.on(e,mousewheel,o.DomEvent.stopPropagation));var i=this._form=o.DomUtil.create(form,t+-list);if(this.options.collapsed){o.Browser.androido.DomEvent.on(e,mouseover,this._expand,this).on(e,mouseout,this._collapse,this);var n=this._layersLink=o.DomUtil.create(a,t+-toggle,e);n.href=#,n.title=Layers,o.Browser.toucho.DomEvent.on(n,click,o.DomEvent.stop).on(n,click,this._expand,this)o.DomEvent.on(n,focus,this._expand,this),this._map.on(click,this._collapse,this)}else this._expand();this._baseLayersList=o.DomUtil.create(div,t+-base,i),this._separator=o.DomUtil.create(div,t+-separator,i),this._overlaysList=o.DomUtil.create(div,t+-overlays,i),e.appendChild(i)},_addLayerfunction(t,e,i){var n=o.stamp(t);this._layers[n]={layert,namee,overlayi},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_updatefunction(){if(this._container){this._baseLayersList.innerHTML=,this._overlaysList.innerHTML=;var t,e,i=!1,n=!1;for(t in this._layers)e=this._layers[t],this._addItem(e),n=ne.overlay,i=i!e.overlay;this._separator.style.display=n&&inone}},_onLayerChangefunction(t){var e=this._layers[o.stamp(t.layer)];if(e){this._handlingClickthis._update();var i=e.overlaylayeradd===t.typeoverlayaddoverlayremovelayeradd===t.typebaselayerchangenull;i&&this._map.fire(i,e)}},_createRadioElementfunction(t,i){var n='input type=radio class=leaflet-control-layers-selector name='+t+'';i&&(n+=' checked=checked'),n+=;var o=e.createElement(div);return o.innerHTML=n,o.firstChild},_addItemfunction(t){var i,n=e.createElement(label),s=this._map.hasLayer(t.layer);t.overlay(i=e.createElement(input),i.type=checkbox,i.className=leaflet-control-layers-selector,i.defaultChecked=s)i=this._createRadioElement(leaflet-base-layers,s),i.layerId=o.stamp(t.layer),o.DomEvent.on(i,click,this._onInputClick,this);var a=e.createElement(span);a.innerHTML= +t.name,n.appendChild(i),n.appendChild(a);var r=t.overlaythis._overlaysListthis._baseLayersList;return r.appendChild(n),n},_onInputClickfunction(){var t,e,i,n=this._form.getElementsByTagName(input),o=n.length;for(this._handlingClick=!0,t=0;ot;t++)e=n[t],i=this._layers[e.layerId],e.checked&&!this._map.hasLayer(i.layer)this._map.addLayer(i.layer)!e.checked&&this._map.hasLayer(i.layer)&&this._map.removeLayer(i.layer);this._handlingClick=!1},_expandfunction(){o.DomUtil.addClass(this._container,leaflet-control-layers-expanded)},_collapsefunction(){this._container.className=this._container.className.replace( leaflet-control-layers-expanded,)}}),o.control.layers=function(t,e,i){return new o.Control.Layers(t,e,i)},o.PosAnimation=o.Class.extend({includeso.Mixin.Events,runfunction(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._newPos=e,this.fire(start),t.style[o.DomUtil.TRANSITION]=all +(i.25)+s cubic-bezier(0,0,+(n.5)+,1),o.DomEvent.on(t,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),o.DomUtil.setPosition(t,e),o.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(o.bind(this._onStep,this),50)},stopfunction(){this._inProgress&&(o.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),o.Util.falseFn(this._el.offsetWidth))},_onStepfunction(){var t=this._getPos();return t(this._el._leaflet_pos=t,this.fire(step),void 0)(this._onTransitionEnd(),void 0)},_transformRe([-+](d.)d+)D, ([-+](d.)d+)D),_getPosfunction(){var e,i,n,s=this._el,a=t.getComputedStyle(s);if(o.Browser.any3d){if(n=a[o.DomUtil.TRANSFORM].match(this._transformRe),!n)return;e=parseFloat(n[1]),i=parseFloat(n[2])}else e=parseFloat(a.left),i=parseFloat(a.top);return new o.Point(e,i,!0)},_onTransitionEndfunction(){o.DomEvent.off(this._el,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[o.DomUtil.TRANSITION]=,this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire(step).fire(end))}}),o.Map.include({setViewfunction(t,e,n){if(e=this._limitZoom(e),t=o.latLng(t),n=n{},this._panAnim&&this._panAnim.stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==i&&(n.zoom=o.extend({animaten.animate},n.zoom),n.pan=o.extend({animaten.animate},n.pan));var s=this._zoom!==ethis._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom)this._tryAnimatedPan(t,n.pan);if(s)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},panByfunction(t,e){if(t=o.point(t).round(),e=e{},!t.x&&!t.y)return this;if(this._panAnim(this._panAnim=new o.PosAnimation,this._panAnim.on({stepthis._onPanTransitionStep,endthis._onPanTransitionEnd},this)),e.noMoveStartthis.fire(movestart),e.animate!==!1){o.DomUtil.addClass(this._mapPane,leaflet-pan-anim);var i=this._getMapPanePos().subtract(t);this._panAnim.run(this._mapPane,i,e.duration.25,e.easeLinearity)}else this._rawPanBy(t),this.fire(move).fire(moveend);return this},_onPanTransitionStepfunction(){this.fire(move)},_onPanTransitionEndfunction(){o.DomUtil.removeClass(this._mapPane,leaflet-pan-anim),this.fire(moveend)},_tryAnimatedPanfunction(t,e){var i=this._getCenterOffset(t)._floor();return(e&&e.animate)===!0this.getSize().contains(i)(this.panBy(i,e),!0)!1}}),o.PosAnimation=o.DomUtil.TRANSITIONo.PosAnimationo.PosAnimation.extend({runfunction(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i.25,this._easeOutPower=1Math.max(n.5,.2),this._startPos=o.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire(start),this._animate()},stopfunction(){this._inProgress&&(this._step(),this._complete())},_animatefunction(){this._animId=o.Util.requestAnimFrame(this._animate,this),this._step()},_stepfunction(){var t=+new Date-this._startTime,e=1e3this._duration;etthis._runFrame(this._easeOut(te))(this._runFrame(1),this._complete())},_runFramefunction(t){var e=this._startPos.add(this._offset.multiplyBy(t));o.DomUtil.setPosition(this._el,e),this.fire(step)},_completefunction(){o.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire(end)},_easeOutfunction(t){return 1-Math.pow(1-t,this._easeOutPower)}}),o.Map.mergeOptions({zoomAnimation!0,zoomAnimationThreshold4}),o.DomUtil.TRANSITION&&o.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&o.DomUtil.TRANSITION&&o.Browser.any3d&&!o.Browser.android23&&!o.Browser.mobileOpera,this._zoomAnimated&&o.DomEvent.on(this._mapPane,o.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),o.Map.include(o.DomUtil.TRANSITION{_catchTransitionEndfunction(){this._animatingZoom&&this._onZoomTransitionEnd()},_nothingToAnimatefunction(){return!this._container.getElementsByClassName(leaflet-zoom-animated).length},_tryAnimatedZoomfunction(t,e,i){if(this._animatingZoom)return!0;if(i=i{},!this._zoomAnimatedi.animate===!1this._nothingToAnimate()Math.abs(e-this._zoom)this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1n),s=this._getCenterLayerPoint()._add(o);return i.animate===!0this.getSize().contains(o)(this.fire(movestart).fire(zoomstart),this._animateZoom(t,e,s,n,null,!0),!0)!1},_animateZoomfunction(t,e,i,n,s,a){this._animatingZoom=!0,o.DomUtil.addClass(this._mapPane,leaflet-zoom-anim),this._animateToCenter=t,this._animateToZoom=e,o.Draggable&&(o.Draggable._disabled=!0),this.fire(zoomanim,{centert,zoome,origini,scalen,deltas,backwardsa})},_onZoomTransitionEndfunction(){this._animatingZoom=!1,o.DomUtil.removeClass(this._mapPane,leaflet-zoom-anim),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),o.Draggable&&(o.Draggable._disabled=!1)}}{}),o.TileLayer.include({_animateZoomfunction(t){this._animating(this._animating=!0,this._prepareBgBuffer());var e=this._bgBuffer,i=o.DomUtil.TRANSFORM,n=t.deltao.DomUtil.getTranslateString(t.delta)e.style[i],s=o.DomUtil.getScaleString(t.scale,t.origin);e.style[i]=t.backwardss+ +nn+ +s},_endZoomAnimfunction(){var t=this._tileContainer,e=this._bgBuffer;t.style.visibility=,t.parentNode.appendChild(t),o.Util.falseFn(e.offsetWidth),this._animating=!1},_clearBgBufferfunction(){var t=this._map;!tt._animatingZoomt.touchZoom._zooming(this._bgBuffer.innerHTML=,this._bgBuffer.style[o.DomUtil.TRANSFORM]=)},_prepareBgBufferfunction(){var t=this._tileContainer,e=this._bgBuffer,i=this._getLoadedTilesPercentage(e),n=this._getLoadedTilesPercentage(t);return e&&i.5&&.5n(t.style.visibility=hidden,this._stopLoadingImages(t),void 0)(e.style.visibility=hidden,e.style[o.DomUtil.TRANSFORM]=,this._tileContainer=e,e=this._bgBuffer=t,this._stopLoadingImages(e),clearTimeout(this._clearBgBufferTimer),void 0)},_getLoadedTilesPercentagefunction(t){var e,i,n=t.getElementsByTagName(img),o=0;for(e=0,i=n.length;ie;e++)n[e].complete&&o++;return oi},_stopLoadingImagesfunction(t){var e,i,n,s=Array.prototype.slice.call(t.getElementsByTagName(img));for(e=0,i=s.length;ie;e++)n=s[e],n.complete(n.onload=o.Util.falseFn,n.onerror=o.Util.falseFn,n.src=o.Util.emptyImageUrl,n.parentNode.removeChild(n))}}),o.Map.include({_defaultLocateOptions{watch!1,setView!1,maxZoom10,timeout1e4,maximumAge0,enableHighAccuracy!1},locatefunction(t){if(t=this._locateOptions=o.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code0,messageGeolocation not supported.}),this;var e=o.bind(this._handleGeolocationResponse,this),i=o.bind(this._handleGeolocationError,this);return t.watchthis._locationWatchId=navigator.geolocation.watchPosition(e,i,t)navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocatefunction(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationErrorfunction(t){var e=t.code,i=t.message(1===epermission denied2===eposition unavailabletimeout);this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire(locationerror,{codee,messageGeolocation error +i+.})},_handleGeolocationResponsefunction(t){var e=t.coords.latitude,i=t.coords.longitude,n=new o.LatLng(e,i),s=180t.coords.accuracy40075017,a=sMath.cos(o.LatLng.DEG_TO_RADe),r=o.latLngBounds([e-s,i-a],[e+s,i+a]),h=this._locateOptions;if(h.setView){var l=Math.min(this.getBoundsZoom(r),h.maxZoom);this.setView(n,l)}var u={latlngn,boundsr};for(var c in t.coords)number==typeof t.coords[c]&&(u[c]=t.coords[c]);this.fire(locationfound,u)}})}(window,document);